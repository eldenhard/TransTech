{"ast":null,"code":"import Vue from \"vue\";\nimport axios from \"axios\";\nimport { getItem, setItem } from \"@/helpers/persistanseStorage\";\nlet config = {// baseURL: 'http://10.1.5.65/api/'\n  // baseURL: '/api/'\n};\n\nconst _axios = axios.create(config);\n\n_axios.interceptors.request.use(function (config) {\n  const token = getItem('accessToken');\n  config.headers.Authorization = token ? `Basic ${token}` : \"\";\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\n\n_axios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (!error.response) {\n    console.log(\"Network error\");\n  } else {\n    const originalRequest = error.config;\n\n    if (error.response.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n      setItem(\"accessToken\", \"\"); //.location.href = \"/\"\n    }\n\n    return Promise.reject(error);\n  }\n});\n\nPlugin.install = function (Vue, options) {\n  Vue.axios = _axios;\n  window.axios = _axios;\n  Object.defineProperties(Vue.prototype, {\n    axios: {\n      get() {\n        return _axios;\n      }\n\n    },\n    $axios: {\n      get() {\n        return _axios;\n      }\n\n    }\n  });\n};\n\nVue.use(Plugin);\nexport const api = _axios;\nexport default Plugin;","map":{"version":3,"names":["Vue","axios","getItem","setItem","config","_axios","create","interceptors","request","use","token","headers","Authorization","error","Promise","reject","response","console","log","originalRequest","status","_retry","Plugin","install","options","window","Object","defineProperties","prototype","get","$axios","api"],"sources":["C:/Users/Asus/Desktop/VueTTRe/project/src/helpers/axios.js"],"sourcesContent":["import Vue from \"vue\";\r\nimport axios from \"axios\";\r\nimport {getItem, setItem} from \"@/helpers/persistanseStorage\";\r\n\r\nlet config = {\r\n    // baseURL: 'http://10.1.5.65/api/'\r\n    // baseURL: '/api/'\r\n\r\n}\r\n\r\nconst _axios = axios.create(config)\r\n\r\n_axios.interceptors.request.use(\r\n    function(config){\r\n        const token = getItem('accessToken')\r\n        config.headers.Authorization = token ? `Basic ${token}` : \"\"\r\n        return config\r\n    },\r\n    function(error){\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\n_axios.interceptors.response.use(\r\n    function(response){\r\n        return response\r\n    },\r\n    function(error){\r\n        if(!error.response){\r\n            console.log(\"Network error\")\r\n        } else {\r\n            const originalRequest = error.config\r\n            if(error.response.status === 401 && !originalRequest._retry){\r\n                originalRequest._retry = true\r\n                setItem(\"accessToken\", \"\")\r\n                //.location.href = \"/\"\r\n            }\r\n            return Promise.reject(error);\r\n        }\r\n    }\r\n)\r\n\r\nPlugin.install = function(Vue, options){\r\n    Vue.axios = _axios;\r\n    window.axios = _axios\r\n    Object.defineProperties(Vue.prototype, {\r\n        axios: {\r\n            get(){\r\n                return _axios\r\n            }\r\n        },\r\n        $axios: {\r\n            get(){\r\n                return  _axios;\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n\r\nVue.use(Plugin);\r\n\r\nexport const api = _axios\r\nexport default Plugin"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,EAAiBC,OAAjB,QAA+B,8BAA/B;AAEA,IAAIC,MAAM,GAAG,CACT;EACA;AAFS,CAAb;;AAMA,MAAMC,MAAM,GAAGJ,KAAK,CAACK,MAAN,CAAaF,MAAb,CAAf;;AAEAC,MAAM,CAACE,YAAP,CAAoBC,OAApB,CAA4BC,GAA5B,CACI,UAASL,MAAT,EAAgB;EACZ,MAAMM,KAAK,GAAGR,OAAO,CAAC,aAAD,CAArB;EACAE,MAAM,CAACO,OAAP,CAAeC,aAAf,GAA+BF,KAAK,GAAI,SAAQA,KAAM,EAAlB,GAAsB,EAA1D;EACA,OAAON,MAAP;AACH,CALL,EAMI,UAASS,KAAT,EAAe;EACX,OAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CARL;;AAWAR,MAAM,CAACE,YAAP,CAAoBS,QAApB,CAA6BP,GAA7B,CACI,UAASO,QAAT,EAAkB;EACd,OAAOA,QAAP;AACH,CAHL,EAII,UAASH,KAAT,EAAe;EACX,IAAG,CAACA,KAAK,CAACG,QAAV,EAAmB;IACfC,OAAO,CAACC,GAAR,CAAY,eAAZ;EACH,CAFD,MAEO;IACH,MAAMC,eAAe,GAAGN,KAAK,CAACT,MAA9B;;IACA,IAAGS,KAAK,CAACG,QAAN,CAAeI,MAAf,KAA0B,GAA1B,IAAiC,CAACD,eAAe,CAACE,MAArD,EAA4D;MACxDF,eAAe,CAACE,MAAhB,GAAyB,IAAzB;MACAlB,OAAO,CAAC,aAAD,EAAgB,EAAhB,CAAP,CAFwD,CAGxD;IACH;;IACD,OAAOW,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;EACH;AACJ,CAhBL;;AAmBAS,MAAM,CAACC,OAAP,GAAiB,UAASvB,GAAT,EAAcwB,OAAd,EAAsB;EACnCxB,GAAG,CAACC,KAAJ,GAAYI,MAAZ;EACAoB,MAAM,CAACxB,KAAP,GAAeI,MAAf;EACAqB,MAAM,CAACC,gBAAP,CAAwB3B,GAAG,CAAC4B,SAA5B,EAAuC;IACnC3B,KAAK,EAAE;MACH4B,GAAG,GAAE;QACD,OAAOxB,MAAP;MACH;;IAHE,CAD4B;IAMnCyB,MAAM,EAAE;MACJD,GAAG,GAAE;QACD,OAAQxB,MAAR;MACH;;IAHG;EAN2B,CAAvC;AAYH,CAfD;;AAkBAL,GAAG,CAACS,GAAJ,CAAQa,MAAR;AAEA,OAAO,MAAMS,GAAG,GAAG1B,MAAZ;AACP,eAAeiB,MAAf"},"metadata":{},"sourceType":"module"}