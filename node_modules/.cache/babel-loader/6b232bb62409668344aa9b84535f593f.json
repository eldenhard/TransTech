{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { Graphics } from \"../../core/render/Graphics\";\n/**\r\n * Draws a slice for [[FunnelSeries]].\r\n */\n\nvar FunnelSlice =\n/** @class */\nfunction (_super) {\n  __extends(FunnelSlice, _super);\n\n  function FunnelSlice() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    Object.defineProperty(_this, \"_projectionDirty\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(_this, \"_tlx\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_tly\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_trx\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_try\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_blx\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_bly\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_brx\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_bry\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_cprx\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_cplx\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_cpry\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    Object.defineProperty(_this, \"_cply\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 0\n    });\n    return _this;\n  }\n\n  Object.defineProperty(FunnelSlice.prototype, \"_afterNew\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n\n      _super.prototype._afterNew.call(this);\n\n      this.set(\"draw\", function (display) {\n        display.moveTo(_this._tlx, _this._tly);\n        display.lineTo(_this._trx, _this._try);\n        display.quadraticCurveTo(_this._cprx, _this._cpry, _this._brx, _this._bry);\n        display.lineTo(_this._blx, _this._bly);\n        display.quadraticCurveTo(_this._cplx, _this._cply, _this._tlx, _this._tly);\n      });\n    }\n  });\n  Object.defineProperty(FunnelSlice.prototype, \"getPoint\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (locationX, locationY) {\n      var w = this.width();\n      var h = this.height();\n      var tw = this.get(\"topWidth\", 0);\n      var bw = this.get(\"bottomWidth\", 0);\n\n      if (this.get(\"orientation\") == \"vertical\") {\n        var tlx = -tw / 2;\n        var trx = tw / 2;\n        var brx = bw / 2;\n        var blx = -bw / 2;\n        var mlx = tlx + (blx - tlx) * locationY;\n        var mrx = trx + (brx - trx) * locationY;\n        return {\n          x: mlx + (mrx - mlx) * locationX,\n          y: h * locationY\n        };\n      } else {\n        var tlx = -tw / 2;\n        var trx = tw / 2;\n        var brx = bw / 2;\n        var blx = -bw / 2;\n        var mlx = tlx + (blx - tlx) * locationX;\n        var mrx = trx + (brx - trx) * locationX;\n        return {\n          x: w * locationX,\n          y: mlx + (mrx - mlx) * locationY\n        };\n      }\n    }\n  });\n  Object.defineProperty(FunnelSlice.prototype, \"_changed\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (this.isDirty(\"topWidth\") || this.isDirty(\"bottomWidth\") || this.isDirty(\"expandDistance\") || this.isDirty(\"orientation\") || this.isDirty(\"width\") || this.isDirty(\"height\")) {\n        var w = this.width();\n        var h = this.height();\n        var tw = this.get(\"topWidth\", 0);\n        var bw = this.get(\"bottomWidth\", 0);\n        this._clear = true;\n        var ed = this.get(\"expandDistance\", 0);\n\n        if (this.get(\"orientation\") == \"vertical\") {\n          this._tlx = -tw / 2;\n          this._tly = 0;\n          this._trx = tw / 2;\n          this._try = 0;\n          this._brx = bw / 2;\n          this._bry = h;\n          this._blx = -bw / 2;\n          this._bly = h;\n          this._cprx = this._trx + (this._brx - this._trx) / 2 + ed * h, this._cpry = this._try + 0.5 * h;\n          this._cplx = this._tlx + (this._blx - this._tlx) / 2 - ed * h;\n          this._cply = this._tly + 0.5 * h;\n        } else {\n          this._tly = -tw / 2;\n          this._tlx = 0;\n          this._try = tw / 2;\n          this._trx = 0;\n          this._bry = bw / 2;\n          this._brx = w;\n          this._bly = -bw / 2;\n          this._blx = w;\n          this._cpry = this._try + (this._bry - this._try) / 2 + ed * w, this._cprx = this._trx + 0.5 * w;\n          this._cply = this._tly + (this._bly - this._tly) / 2 - ed * w;\n          this._cplx = this._tlx + 0.5 * w;\n        }\n      }\n\n      _super.prototype._changed.call(this);\n    }\n  });\n  Object.defineProperty(FunnelSlice, \"className\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"FunnelSlice\"\n  });\n  Object.defineProperty(FunnelSlice, \"classNames\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: Graphics.classNames.concat([FunnelSlice.className])\n  });\n  return FunnelSlice;\n}(Graphics);\n\nexport { FunnelSlice };","map":{"version":3,"mappings":"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","names":["Graphics","__extends","Object","_super","_afterNew","call","set","display","moveTo","_this","_tlx","_tly","lineTo","_trx","_try","quadraticCurveTo","_cprx","_cpry","_brx","_bry","_blx","_bly","_cplx","_cply","locationX","locationY","w","width","h","height","tw","get","bw","tlx","trx","brx","blx","mlx","mrx","x","y","isDirty","_clear","ed","_changed","classNames","concat","FunnelSlice","className"],"sourceRoot":"","sources":["../../../../../src/.internal/charts/funnel/FunnelSlice.ts"],"sourcesContent":["import { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"../../core/render/Graphics\";\nimport type { IPoint } from \"../../core/util/IPoint\";\n\nexport interface IFunnelSliceSettings extends IGraphicsSettings {\n\n\t/**\n\t * Top width in pixels.\n\t */\n\ttopWidth?: number;\n\n\t/**\n\t * Bottom width in pixels.\n\t */\n\tbottomWidth?: number;\n\n\t/**\n\t * Orientation.\n\t */\n\torientation?: \"vertical\" | \"horizontal\";\n\n\t/**\n\t * A distance in pixels the slice should \"puff up\".\n\t *\n\t * Any non-zero value will make sides of the slide curved.\n\t */\n\texpandDistance?: number;\n\n}\n\nexport interface IFunnelSlicePrivate extends IGraphicsPrivate {\n}\n\n/**\n * Draws a slice for [[FunnelSeries]].\n */\nexport class FunnelSlice extends Graphics {\n\tdeclare public _settings: IFunnelSliceSettings;\n\tdeclare public _privateSettings: IFunnelSlicePrivate;\n\n\tpublic static className: string = \"FunnelSlice\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([FunnelSlice.className]);\n\tprotected _projectionDirty: boolean = false;\n\n\tprotected _tlx: number = 0;\n\tprotected _tly: number = 0;\n\n\tprotected _trx: number = 0;\n\tprotected _try: number = 0;\n\n\tprotected _blx: number = 0;\n\tprotected _bly: number = 0;\n\n\tprotected _brx: number = 0;\n\tprotected _bry: number = 0;\n\n\tprotected _cprx: number = 0;\n\tprotected _cplx: number = 0;\n\tprotected _cpry: number = 0;\n\tprotected _cply: number = 0;\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\t\tthis.set(\"draw\", (display) => {\n\t\t\tdisplay.moveTo(this._tlx, this._tly);\n\t\t\tdisplay.lineTo(this._trx, this._try);\n\t\t\tdisplay.quadraticCurveTo(this._cprx, this._cpry, this._brx, this._bry);\n\t\t\tdisplay.lineTo(this._blx, this._bly);\n\t\t\tdisplay.quadraticCurveTo(this._cplx, this._cply, this._tlx, this._tly);\n\t\t})\n\t}\n\n\tpublic getPoint(locationX: number, locationY: number): IPoint {\n\t\tlet w = this.width();\n\t\tlet h = this.height();\n\n\t\tconst tw = this.get(\"topWidth\", 0);\n\t\tconst bw = this.get(\"bottomWidth\", 0);\n\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tlet tlx = -tw / 2;\n\t\t\tlet trx = tw / 2;\n\n\t\t\tlet brx = bw / 2;\n\t\t\tlet blx = - bw / 2;\n\n\t\t\tlet mlx = tlx + (blx - tlx) * locationY;\n\t\t\tlet mrx = trx + (brx - trx) * locationY;\n\n\t\t\treturn { x: mlx + (mrx - mlx) * locationX, y: h * locationY };\n\t\t}\n\t\telse {\n\t\t\tlet tlx = -tw / 2;\n\t\t\tlet trx = tw / 2;\n\n\t\t\tlet brx = bw / 2;\n\t\t\tlet blx = - bw / 2;\n\n\t\t\tlet mlx = tlx + (blx - tlx) * locationX;\n\t\t\tlet mrx = trx + (brx - trx) * locationX;\n\n\t\t\treturn { x: w * locationX, y: mlx + (mrx - mlx) * locationY};\n\t\t}\n\n\t}\n\n\tpublic _changed() {\n\n\t\tif (this.isDirty(\"topWidth\") || this.isDirty(\"bottomWidth\") || this.isDirty(\"expandDistance\") || this.isDirty(\"orientation\") || this.isDirty(\"width\") || this.isDirty(\"height\")) {\n\t\t\tconst w = this.width();\n\t\t\tconst h = this.height();\n\t\t\tconst tw = this.get(\"topWidth\", 0);\n\t\t\tconst bw = this.get(\"bottomWidth\", 0);\n\t\t\tthis._clear = true;\n\n\t\t\tlet ed = this.get(\"expandDistance\", 0);\n\n\t\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\t\tthis._tlx = -tw / 2;\n\t\t\t\tthis._tly = 0;\n\n\t\t\t\tthis._trx = tw / 2;\n\t\t\t\tthis._try = 0;\n\n\t\t\t\tthis._brx = bw / 2;\n\t\t\t\tthis._bry = h;\n\n\t\t\t\tthis._blx = -bw / 2;\n\t\t\t\tthis._bly = h;\n\n\t\t\t\tthis._cprx = this._trx + (this._brx - this._trx) / 2 + ed * h,\n\t\t\t\tthis._cpry = this._try + 0.5 * h;\n\n\t\t\t\tthis._cplx = this._tlx + (this._blx - this._tlx) / 2 - ed * h;\n\t\t\t\tthis._cply = this._tly + 0.5 * h;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._tly = -tw / 2;\n\t\t\t\tthis._tlx = 0;\n\n\t\t\t\tthis._try = tw / 2;\n\t\t\t\tthis._trx = 0;\n\n\t\t\t\tthis._bry = bw / 2;\n\t\t\t\tthis._brx = w;\n\n\t\t\t\tthis._bly = -bw / 2;\n\t\t\t\tthis._blx = w;\n\n\t\t\t\tthis._cpry = this._try + (this._bry - this._try) / 2 + ed * w,\n\t\t\t\tthis._cprx = this._trx + 0.5 * w;\n\n\t\t\t\tthis._cply = this._tly + (this._bly - this._tly) / 2 - ed * w;\n\t\t\t\tthis._cplx = this._tlx + 0.5 * w;\n\t\t\t}\n\t\t}\n\t\tsuper._changed();\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}