{"ast":null,"code":"import api from '@/api/report';\nimport { mapState } from 'vuex';\nimport Notifications from '@/components/notifications/Notifications.vue';\nimport editBDR from '@/views/editBDR.vue';\nimport Loader from '@/components/loader/loader.vue';\nexport default {\n  name: 'BDRreport',\n  components: {\n    Notifications,\n    editBDR,\n    Loader\n  },\n\n  data() {\n    return {\n      BDRreport: '',\n      showNotify: false,\n      showEditbdr: false,\n      loader: false,\n      notifyHead: '',\n      notifyMessage: '',\n      notifyClass: ''\n    };\n  },\n\n  computed: { ...mapState({\n      user: state => state.auth.user,\n      uid: state => state.auth.uid\n    })\n  },\n  methods: {\n    openCurrentReport(id) {\n      window.open('/edit-bdr/' + `${id}`, '_blank');\n    },\n\n    createBDRreport() {\n      this.loader = true;\n      api.createBDRreport().then(response => {\n        api.getBDRreport().then(response => {\n          this.BDRreport = response.data.data;\n          this.loader = false;\n          this.notifyHead = 'Успешно';\n          this.notifyMessage = 'Отчет создан';\n          this.notifyClass = 'wrapper-success';\n          this.showNotify = true;\n          setTimeout(this.closeNotification, 1500);\n        });\n      });\n    },\n\n    OpenCreateBDRreport() {\n      this.loader = true;\n      api.getBDRreport().then(response => {\n        this.BDRreport = response.data.data;\n        this.loader = false;\n        this.notifyHead = 'Успешно';\n        this.notifyMessage = 'Отчеты загружены';\n        this.notifyClass = 'wrapper-success';\n        this.showNotify = true;\n        setTimeout(this.closeNotification, 1500);\n      });\n    },\n\n    closeNotification() {\n      this.showNotify = false;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAsDA;AACA;AACA;AACA;AACA;AAEA;EACAA,iBADA;EAEAC;IAAAC;IAAAC;IAAAC;EAAA,CAFA;;EAIAC;IACA;MACAC,aADA;MAEAC,iBAFA;MAGAC,kBAHA;MAIAC,aAJA;MAKAC,cALA;MAMAC,iBANA;MAOAC;IAPA;EAUA,CAfA;;EAgBAC,YACA;MACAC,8BADA;MAEAC;IAFA;EADA,CAhBA;EAsBAC;IACAC;MACAC;IAEA,CAJA;;IAKAC;MACA;MACAC,sBACAC,IADA,CACAC;QACAF,mBACAC,IADA,CACAC;UACA;UACA;UACA;UACA;UACA;UACA;UACAC;QAEA,CAVA;MAWA,CAbA;IAcA,CArBA;;IAsBAC;MACA;MACAJ,mBACAC,IADA,CACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACAC;MACA,CATA;IAUA,CAlCA;;IAmCAE;MACA;IACA;;EArCA;AAtBA","names":["name","components","Notifications","editBDR","Loader","data","BDRreport","showNotify","showEditbdr","loader","notifyHead","notifyMessage","notifyClass","computed","user","uid","methods","openCurrentReport","window","createBDRreport","api","then","response","setTimeout","OpenCreateBDRreport","closeNotification"],"sourceRoot":"src/views","sources":["BDRreport.vue"],"sourcesContent":["<template>\r\n<div>\r\n   <Loader :loader=\"loader\"></Loader>\r\n    <h2>БДР отчеты</h2>\r\n    <b-container class=\"bv-example-row\">\r\n     <b-row>\r\n    <b-col>\r\n        <button class=\"button Action\" @click=\"createBDRreport()\" style=\"width: 100%; position: relative; left: 50%; transform: translate(-50%,0); font-size: 17px; margin-top: 3%\">Создать шаблон БДР отчета</button>\r\n    </b-col>\r\n\r\n    <b-col>\r\n        <button class=\"button Action\" @click=\"OpenCreateBDRreport()\"  style=\"width: 100%; position: relative; left: 50%; transform: translate(-50%,0); font-size: 17px; margin-top: 3%\">Загрузить БДР отчет</button>\r\n    </b-col>\r\n  </b-row>\r\n\r\n</b-container>\r\n<br>\r\n<b-container class=\"bv-example-row\">\r\n     <b-row>\r\n    <b-col>\r\n<div style=\"width: 100%; overflow-x: auto; height: 80vh; overflow-y: auto; position: relative; left: 50%; transform: translate(-50%,0);\"> \r\n    <table class=\"table\" style=\"table-layout: fixed;\">\r\n        <thead>\r\n            <tr>\r\n                    <th style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">Название</th>\r\n                    <th style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">Дата создания</th>\r\n                    <th style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">Дата последнего обновления</th>\r\n                    <th style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">Файл</th>\r\n                    <th style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">Действие</th>\r\n\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n                <tr v-for=\"bdr in BDRreport\" :key=\"bdr.id\">\r\n                    <td style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">{{bdr.name}}</td>\r\n                    <td style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">{{new Date(bdr.created_at).toLocaleString()}}</td>\r\n                    <td style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">{{new Date(bdr.updated_at).toLocaleString()}}</td>\r\n                    <td style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">\r\n                        <a target=\"_blank\" :href=\"bdr.file\" v-if=\"bdr.file\"><img src=\"@/assets/excel.png\" alt=\"\" width=\"50px!important\"></a>\r\n                    </td>\r\n                    <td style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\"><button class=\"Accept\"  @click=\"openCurrentReport(bdr.id)\">Редактировать</button></td>\r\n\r\n                </tr>\r\n        </tbody>\r\n    </table>\r\n</div>\r\n     \r\n     \r\n<Notifications :show=\"showNotify\" :header=\"notifyHead\" :message=\"notifyMessage\" :block-class=\"notifyClass\" id=\"notif\"/>\r\n<editBDR v-if=\"showEditbdr\"></editBDR>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api/report'\r\nimport { mapState } from 'vuex';\r\nimport Notifications from '@/components/notifications/Notifications.vue'\r\nimport editBDR from '@/views/editBDR.vue';\r\nimport Loader from '@/components/loader/loader.vue'\r\n\r\nexport default {\r\n    name: 'BDRreport',\r\n    components: {Notifications, editBDR, Loader},\r\n\r\n    data(){\r\n        return{\r\n            BDRreport: '',\r\n            showNotify: false,\r\n            showEditbdr: false,\r\n            loader: false,\r\n            notifyHead: '',\r\n            notifyMessage: '',\r\n            notifyClass: '',\r\n\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState({\r\n            user: state => state.auth.user,\r\n            uid: state => state.auth.uid\r\n        })\r\n    },\r\n    methods: {\r\n        openCurrentReport(id){\r\n            window.open('/edit-bdr/' + `${id}`, '_blank');\r\n            \r\n        },\r\n        createBDRreport(){\r\n            this.loader = true\r\n            api.createBDRreport()\r\n            .then(response => {\r\n                api.getBDRreport()\r\n                .then(response => {\r\n                this.BDRreport = response.data.data\r\n                this.loader = false\r\n                this.notifyHead = 'Успешно'\r\n                this.notifyMessage = 'Отчет создан'\r\n                this.notifyClass = 'wrapper-success'\r\n                this.showNotify = true\r\n                setTimeout(this.closeNotification, 1500)\r\n\r\n            })\r\n            })\r\n        },\r\n        OpenCreateBDRreport(){\r\n            this.loader = true\r\n            api.getBDRreport()\r\n            .then(response => {\r\n                this.BDRreport = response.data.data\r\n                this.loader = false\r\n                this.notifyHead = 'Успешно'\r\n                this.notifyMessage = 'Отчеты загружены'\r\n                this.notifyClass = 'wrapper-success'\r\n                this.showNotify = true\r\n                setTimeout(this.closeNotification, 1500)\r\n            })\r\n        },\r\n        closeNotification(){\r\n            this.showNotify = false\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n"]},"metadata":{},"sourceType":"module"}