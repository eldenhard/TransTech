{"ast":null,"code":"import { mapState } from 'vuex';\nexport default {\n  name: 'lk',\n  computed: { ...mapState({\n      id: state => state.auth.uid\n    })\n  },\n\n  data() {\n    return {\n      id: [],\n      PersonalData: '',\n      emp: ''\n    };\n  },\n\n  mounted() {\n    const token = JSON.parse(localStorage.getItem(\"accessToken\")); // const token = pretoken.user.token\n\n    const preid = JSON.parse(localStorage.getItem('vuex'));\n    const id = preid.auth.uid;\n    document.getElementById('loading-page-report').style.display = 'block'; // fetch('http://10.1.5.65/api/reports/kpi/', {\n    // headers: {\n    //     'Authorization': `Basic ${token}` \n    // },\n    // method: 'GET'\n    // })\n    // .then((response) => {\n    //     if (response.ok){\n    //         return response.json().then(r=>{\n    //             this.all_reports = r.data.data;\n    //             document.getElementById('loading-page-report').style.display = 'none'\n    //             console.log(this.all_reports)\n    //     })\n    // }\n    //        else{\n    //            console.log('NOT OK')\n    //            document.getElementById('loading-page-report').style.display = 'none'\n    //        }\n    //    }),\n    // ${id}\n\n    fetch('http://10.1.5.65/api/personal/users/' + `${id}`, {\n      headers: {\n        'Authorization': `Basic ${token}`\n      },\n      method: 'GET'\n    }).then(response => {\n      if (response.ok) {\n        return response.json().then(r => {\n          this.PersonalData = r;\n          document.getElementById('loading-page-report').style.display = 'none';\n          console.log(this.PersonalData);\n        });\n      } else {\n        console.log('NOT OK'); //    document.getElementById('loading-page-report').style.display = 'none'\n\n        document.getElementById('notifications-2').style.display = 'block';\n        setTimeout(this.Notif, 2500);\n      }\n    }), fetch('http://10.1.5.65/api/personal/users/?page_size=200&manager=' + `${id}`, {\n      headers: {\n        'Authorization': `Basic ${token}`\n      },\n      method: 'GET'\n    }).then(response => {\n      if (response.ok) {\n        return response.json().then(r => {\n          this.emp = r.data;\n          document.getElementById('loading-page-report').style.display = 'none';\n          console.log(this.emp);\n        });\n      } else {\n        console.log('NOT OK');\n        document.getElementById('loading-page-report').style.display = 'none';\n        document.getElementById('notifications-2').style.display = 'block';\n        setTimeout(this.Notif, 2500);\n      }\n    });\n  },\n\n  methods: {\n    Notif() {\n      document.getElementById('notifications-2').style.display = 'none';\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAmGA;AACA;EACAA,UADA;EAEAC,YACA;MACAC;IADA;EADA,CAFA;;EAOAC;IACA;MACAD,MADA;MAEAE,gBAFA;MAGAC;IAHA;EAKA,CAbA;;EAcAC;IACA,8DADA,CAEA;;IACA;IACA;IAEAC,uEANA,CAOA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IAEA;;IACAC;MACAC;QACA;MADA,CADA;MAIAC;IAJA,GAMAC,IANA,CAMAC;MACA;QACA;UACA;UACAL;UACAM;QACA,CAJA;MAKA,CANA,MAOA;QACAA,sBADA,CAEA;;QACAN;QACAO;MAEA;IACA,CArBA,GAuBAN;MACAC;QACA;MADA,CADA;MAIAC;IAJA,GAMAC,IANA,CAMAC;MACA;QACA;UACA;UACAL;UACAM;QACA,CAJA;MAKA,CANA,MAOA;QACAA;QACAN;QACAA;QACAO;MAEA;IACA,CArBA,CAvBA;EA6CA,CAxFA;;EAyFAC;IACAC;MACAT;IAEA;;EAJA;AAzFA","names":["name","computed","id","data","PersonalData","emp","mounted","document","fetch","headers","method","then","response","console","setTimeout","methods","Notif"],"sourceRoot":"src/views","sources":["lk.vue"],"sourcesContent":["<template>\r\n    <div>\r\n    <h2>Личный кабинет</h2>\r\n<br><br>\r\n    <div class=\"contact-information\">\r\n\r\n    <h4><span style=\"border-bottom: 2px solid #EC2332\">Контактная информация</span></h4>\r\n\r\n    <br>\r\n    <p class=\"contact-var\"> <span class=\"contact-header\">ФИО: </span>{{PersonalData.last_name}} {{PersonalData.first_name}} {{PersonalData.middle_name}}</p>\r\n    <p class=\"contact-var\"><span class=\"contact-header\">Должность: </span>{{PersonalData.post}}</p>\r\n    <p class=\"contact-var\" v-for=\"group in PersonalData.groups\" :key=\"group.id\">\r\n         <span class=\"contact-header\" >Отдел: </span><span></span>{{group}}</p>\r\n    <!-- <p class=\"contact-var\"> <span class=\"contact-header\">Начальник: </span>{{PersonalData.manager}}</p> -->\r\n    <p class=\"contact-var\"><span class=\"contact-header\">Почта: </span>{{PersonalData.email}}</p>\r\n    <h4><span style=\"border-bottom: 2px solid #EC2332\">Сотрудники в подчинении</span></h4>\r\n    <br>\r\n    <table style=\"width: 50%\">\r\n        <tr>\r\n            <td style=\"font-weight: bold\">ФИО</td>\r\n            <td style=\"font-weight: bold\">Должность</td>\r\n            <td style=\"font-weight: bold\">Почта</td>\r\n        </tr>\r\n\r\n        <tr  v-for=\"em in emp\" :key=\"em\">\r\n            <td>{{em.last_name}} {{em.first_name}} {{em.middle_name}}</td>\r\n            <td>{{em.post}}</td>\r\n\r\n            <td>{{em.email}}</td>\r\n        </tr>\r\n    </table>\r\n    \r\n\r\n\r\n    </div>\r\n\r\n    <br><br>\r\n \r\n    <div class=\"wrapper-alert\" id=\"notifications-2\" style=\"display: none;\">\r\n<div class=\"card\">\r\n    <div class=\"subject\">\r\n    <h5>Ошибка</h5>\r\n    <p>Попробуйте получить доступ к личному кабинету позже</p>\r\n    </div>\r\n</div>\r\n</div>\r\n\r\n<section id=\"loading-page-report\" style=\"display:none\">\r\n<svg version=\"1.1\" id=\"L7\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n  viewBox=\"0 0 100 100\" enable-background=\"new 0 0 100 100\" xml:space=\"preserve\">\r\n <path fill=\"#C04945\" d=\"M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3\r\n  c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z\">\r\n      <animateTransform \r\n         attributeName=\"transform\" \r\n         attributeType=\"XML\" \r\n         type=\"rotate\"\r\n         dur=\"2s\" \r\n         from=\"0 50 50\"\r\n         to=\"360 50 50\" \r\n         repeatCount=\"indefinite\" />\r\n  </path>\r\n <path fill=\"#ECECEC\" d=\"M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7\r\n  c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z\">\r\n      <animateTransform \r\n         attributeName=\"transform\" \r\n         attributeType=\"XML\" \r\n         type=\"rotate\"\r\n         dur=\"1s\" \r\n         from=\"0 50 50\"\r\n         to=\"-360 50 50\" \r\n         repeatCount=\"indefinite\" />\r\n  </path>\r\n <path fill=\"#3D70A8\" d=\"M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5\r\n  L82,35.7z\">\r\n      <animateTransform \r\n         attributeName=\"transform\" \r\n         attributeType=\"XML\" \r\n         type=\"rotate\"\r\n         dur=\"2s\" \r\n         from=\"0 50 50\"\r\n         to=\"360 50 50\" \r\n         repeatCount=\"indefinite\" />\r\n  </path>\r\n</svg>\r\n<br>\r\n\r\n</section>\r\n\r\n\r\n<!-- <footer style=\"margin-top: 10%; \">\r\n    <div style=\"width: 100%; height: 300px;  position: relative;text-align: center;color: white;\">\r\n    <img src=\"../assets/Train.jpg\" style=\"object-fit: cover; width: 100%; height: 100%; filter: grayscale(0.9); \">\r\n    <img src=\"../assets/photo.png\" alt=\"\" style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);\">\r\n</div>\r\n</footer> -->\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nexport default {\r\n    name: 'lk',\r\n    computed: {\r\n        ...mapState({\r\n            id: state=> state.auth.uid\r\n        })\r\n    },\r\n    data(){\r\n        return{\r\n            id: [],\r\n            PersonalData: '',\r\n            emp: ''\r\n        }\r\n    },\r\nmounted(){\r\n    const token = JSON.parse(localStorage.getItem(\"accessToken\"))\r\n    // const token = pretoken.user.token\r\n    const preid = JSON.parse(localStorage.getItem('vuex'))\r\n    const id = preid.auth.uid\r\n\r\n    document.getElementById('loading-page-report').style.display = 'block'\r\n    // fetch('http://10.1.5.65/api/reports/kpi/', {\r\n    // headers: {\r\n    //     'Authorization': `Basic ${token}` \r\n    // },\r\n    // method: 'GET'\r\n    // })\r\n    // .then((response) => {\r\n    //     if (response.ok){\r\n    //         return response.json().then(r=>{\r\n    //             this.all_reports = r.data.data;\r\n    //             document.getElementById('loading-page-report').style.display = 'none'\r\n    //             console.log(this.all_reports)\r\n    //     })\r\n    // }\r\n    //        else{\r\n    //            console.log('NOT OK')\r\n    //            document.getElementById('loading-page-report').style.display = 'none'\r\n\r\n    //        }\r\n    //    }),\r\n\r\n    // ${id}\r\n    fetch('http://10.1.5.65/api/personal/users/'+ `${id}`, {\r\n    headers: {\r\n        'Authorization': `Basic ${token}` \r\n    },\r\n    method: 'GET'\r\n    })\r\n    .then((response) => {\r\n                if (response.ok){\r\n                    return response.json().then(r=>{\r\n                        this.PersonalData = r;\r\n                        document.getElementById('loading-page-report').style.display = 'none'\r\n                        console.log(this.PersonalData)\r\n               })\r\n           }\r\n           else{\r\n               console.log('NOT OK')\r\n            //    document.getElementById('loading-page-report').style.display = 'none'\r\n               document.getElementById('notifications-2').style.display = 'block'\r\n               setTimeout(this.Notif, 2500)\r\n\r\n           }\r\n       }),\r\n\r\nfetch('http://10.1.5.65/api/personal/users/?page_size=200&manager='+ `${id}`, {\r\n    headers: {\r\n        'Authorization': `Basic ${token}` \r\n    },\r\n    method: 'GET'\r\n    })\r\n    .then((response) => {\r\n                if (response.ok){\r\n                    return response.json().then(r=>{\r\n                        this.emp = r.data;\r\n                        document.getElementById('loading-page-report').style.display = 'none'\r\n                        console.log(this.emp)\r\n               })\r\n           }\r\n           else{\r\n               console.log('NOT OK')\r\n               document.getElementById('loading-page-report').style.display = 'none'\r\n               document.getElementById('notifications-2').style.display = 'block'\r\n               setTimeout(this.Notif, 2500)\r\n\r\n           }\r\n       })       \r\n    },\r\n    methods: {\r\n        Notif(){\r\n            document.getElementById('notifications-2').style.display = 'none'\r\n\r\n        }\r\n    }\r\n\r\n\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n.contact-var  {\r\n    font-size: 20px;\r\n}\r\n.contact-information {\r\n   position: relative;\r\n   left:50%;\r\n   transform: translate(-50%,0);\r\n    width: 90%;\r\n    padding: 0 !important;\r\n    margin: 0 !important;\r\n}\r\n.contact-header {\r\n    font-weight: bold;\r\n    font-size: 15px;\r\n    padding: 0 !important;\r\n    margin: 0 !important;\r\n}\r\n.report-link {\r\n    margin-top: 1%;\r\n}    \r\n#loading-page-report {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    background: rgb(17, 17, 17, 0.1);\r\n    display: flex;\r\n    position: fixed;\r\n    top: 0;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    z-index: 9999999999999;\r\n\r\n}\r\n#loading-page-report svg{\r\n    width: 120px;\r\n    height: 120px;\r\n    display: inline-block;\r\n    position: relative !important;\r\n    left: 50% !important;\r\n    transform: translate(-50%,0) !important;\r\n    margin-top: 15%;\r\n}\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}