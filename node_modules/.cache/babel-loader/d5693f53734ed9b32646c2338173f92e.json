{"ast":null,"code":"export default {\n  name: 'lk',\n\n  data() {\n    return {\n      'all_reports': [],\n      'id': [],\n      PersonalData: []\n    };\n  },\n\n  mounted() {\n    const pretoken = JSON.parse(localStorage.getItem(\"vuex\"));\n    const token = pretoken.user.token;\n    const preid = JSON.parse(localStorage.getItem('vuex'));\n    const id = preid.user.user.id;\n    console.log(id, token);\n    document.getElementById('loading-page-report').style.display = 'block';\n    fetch('http://10.1.5.65/api/reports/kpi/', {\n      headers: {\n        'Authorization': `Basic ${token}`\n      },\n      method: 'GET'\n    }).then(response => {\n      if (response.ok) {\n        return response.json().then(r => {\n          this.all_reports = r.data.data;\n          document.getElementById('loading-page-report').style.display = 'none';\n          console.log(this.all_reports);\n        });\n      } else {\n        console.log('NOT OK');\n        document.getElementById('loading-page-report').style.display = 'none';\n      }\n    }), fetch('http://10.1.5.65.api/personal/users/' + `_${id}`, {\n      headers: {\n        'Authorization': `Basic ${token}`\n      },\n      method: 'GET'\n    }).then(response => {\n      if (response.ok) {\n        return response.json().then(r => {\n          this.PersonalData = r.data.data;\n          document.getElementById('loading-page-report').style.display = 'none';\n          console.log(this.PersonalData);\n        });\n      } else {\n        console.log('NOT OK');\n        document.getElementById('loading-page-report').style.display = 'none';\n      }\n    });\n  }\n\n};","map":{"version":3,"mappings":"AA4EA;EACAA,UADA;;EAEAC;IACA;MACA,iBADA;MAEA,QAFA;MAGAC;IAHA;EAKA,CARA;;EASAC;IACA;IACA;IACA;IACA;IACAC;IAEAC;IAEAC;MACAC;QACA;MADA,CADA;MAIAC;IAJA,GAMAC,IANA,CAMAC;MACA;QACA;UACA;UACAL;UACAD;QACA,CAJA;MAKA,CANA,MAOA;QACAA;QACAC;MAEA;IACA,CAnBA,GAqBAC;MACAC;QACA;MADA,CADA;MAIAC;IAJA,GAMAC,IANA,CAMAC;MACA;QACA;UACA;UACAL;UACAD;QACA,CAJA;MAKA,CANA,MAOA;QACAA;QACAC;MAEA;IACA,CAnBA,CArBA;EAyCA;;AA3DA","names":["name","data","PersonalData","mounted","console","document","fetch","headers","method","then","response"],"sourceRoot":"src/views","sources":["lk.vue"],"sourcesContent":["<template>\r\n    <div>\r\n    <h2>Личный кабинет</h2>\r\n    <br><br>\r\n    <table style=\"position: relative; left:50%; transform: translate(-50%,0); width: 90%;\" class=\"table1\">\r\n        <thead style=\"border-bottom: 2px solid #C04945; background:#EEEEEE\">\r\n            <tr>\r\n                <th>Имя менеджера</th>\r\n                <th>Фамилия менеджера</th>\r\n    \r\n                <th>Имя сотрудника</th>\r\n                <th>Фамилия сотрудника</th>\r\n  \r\n                <th>Создатель</th>\r\n                <th>Файл</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr  v-for=\"report in all_reports\" :key=\"report.id\">\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td><a download target=\"_blank\" :href=\"report.file\" v-if=\"report.file\"><img src=\"../assets/excel.png\" alt=\"\" width=\"30%\"></a></td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n\r\n\r\n\r\n<section id=\"loading-page-report\" style=\"display:none\">\r\n<svg version=\"1.1\" id=\"L7\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n  viewBox=\"0 0 100 100\" enable-background=\"new 0 0 100 100\" xml:space=\"preserve\">\r\n <path fill=\"#C04945\" d=\"M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3\r\n  c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z\">\r\n      <animateTransform \r\n         attributeName=\"transform\" \r\n         attributeType=\"XML\" \r\n         type=\"rotate\"\r\n         dur=\"2s\" \r\n         from=\"0 50 50\"\r\n         to=\"360 50 50\" \r\n         repeatCount=\"indefinite\" />\r\n  </path>\r\n <path fill=\"#ECECEC\" d=\"M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7\r\n  c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z\">\r\n      <animateTransform \r\n         attributeName=\"transform\" \r\n         attributeType=\"XML\" \r\n         type=\"rotate\"\r\n         dur=\"1s\" \r\n         from=\"0 50 50\"\r\n         to=\"-360 50 50\" \r\n         repeatCount=\"indefinite\" />\r\n  </path>\r\n <path fill=\"#3D70A8\" d=\"M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5\r\n  L82,35.7z\">\r\n      <animateTransform \r\n         attributeName=\"transform\" \r\n         attributeType=\"XML\" \r\n         type=\"rotate\"\r\n         dur=\"2s\" \r\n         from=\"0 50 50\"\r\n         to=\"360 50 50\" \r\n         repeatCount=\"indefinite\" />\r\n  </path>\r\n</svg>\r\n<br>\r\n\r\n</section>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'lk',\r\n    data(){\r\n        return{\r\n            'all_reports': [],\r\n            'id': [],\r\n            PersonalData: []\r\n        }\r\n    },\r\n    mounted(){\r\n    const pretoken = JSON.parse(localStorage.getItem(\"vuex\"))\r\n    const token = pretoken.user.token\r\n    const preid = JSON.parse(localStorage.getItem('vuex'))\r\n    const id = preid.user.user.id\r\n    console.log(id, token)\r\n\r\n    document.getElementById('loading-page-report').style.display = 'block'\r\n\r\n       fetch('http://10.1.5.65/api/reports/kpi/', {\r\n        headers: {\r\n            'Authorization': `Basic ${token}` \r\n        },\r\n        method: 'GET'\r\n    })\r\n    .then((response) => {\r\n        if (response.ok){\r\n            return response.json().then(r=>{\r\n                this.all_reports = r.data.data;\r\n                document.getElementById('loading-page-report').style.display = 'none'\r\n                console.log(this.all_reports)\r\n        })\r\n    }\r\n           else{\r\n               console.log('NOT OK')\r\n               document.getElementById('loading-page-report').style.display = 'none'\r\n\r\n           }\r\n       }),\r\n     \r\n       fetch('http://10.1.5.65.api/personal/users/'+ `_${id}`, {\r\n        headers: {\r\n            'Authorization': `Basic ${token}` \r\n        },\r\n        method: 'GET'\r\n    })\r\n    .then((response) => {\r\n                if (response.ok){\r\n                    return response.json().then(r=>{\r\n                        this.PersonalData = r.data.data;\r\n                        document.getElementById('loading-page-report').style.display = 'none'\r\n                        console.log(this.PersonalData)\r\n               })\r\n           }\r\n           else{\r\n               console.log('NOT OK')\r\n               document.getElementById('loading-page-report').style.display = 'none'\r\n\r\n           }\r\n       })\r\n    },\r\n\r\n\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n.report-link {\r\n\r\n    margin-top: 1%;\r\n}    \r\n#loading-page-report {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    background: rgb(17, 17, 17, 0.1);\r\n    display: flex;\r\n    position: fixed;\r\n    top: 0;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    z-index: 9999999999999;\r\n\r\n}\r\n#loading-page-report svg{\r\n    width: 120px;\r\n    height: 120px;\r\n    display: inline-block;\r\n    position: relative !important;\r\n    left: 50% !important;\r\n    transform: translate(-50%,0) !important;\r\n    margin-top: 15%;\r\n}\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}