{"ast":null,"code":"import api from '@/api/report';\nimport { mapState } from 'vuex';\nimport Notifications from '@/components/notifications/Notifications.vue';\nimport Loader from '@/components/loader/loader.vue';\nexport default {\n  name: 'ReportAbandoned',\n  components: {\n    Notifications,\n    Loader\n  },\n\n  data() {\n    return {\n      report_abandoned: '',\n      loader: false,\n      showNotify: false,\n      notifyHead: '',\n      notifyMessage: '',\n      notifyClass: ''\n    };\n  },\n\n  methods: {\n    CreateReportAbandones() {\n      this.loader = true;\n      api.CreateReportAbandone().then(response => {\n        this.loader = false;\n        this.notifyHead = 'Успешно';\n        this.notifyMessage = 'Отчет создан';\n        this.notifyClass = 'wrapper-success';\n        this.showNotify = true;\n        setTimeout(this.closeNotification, 1500);\n      });\n    },\n\n    DownloadReportAbandones() {\n      this.loader = true;\n      api.GetReportAbandone().then(response => {\n        this.report_abandoned = response.data.data;\n        this.loader = false;\n        this.notifyHead = 'Успешно';\n        this.notifyMessage = 'Отчеты загружены';\n        this.notifyClass = 'wrapper-success';\n        this.showNotify = true;\n        setTimeout(this.closeNotification, 1500);\n      });\n    },\n\n    closeNotification() {\n      this.showNotify = false;\n    }\n\n  },\n  computed: { ...mapState({\n      user: state => state.auth.user,\n      uid: state => state.auth.uid\n    })\n  }\n};","map":{"version":3,"mappings":"AA2EA;AACA;AACA;AACA;AACA;EACAA,uBADA;EAEAC;IAAAC;IAAAC;EAAA,CAFA;;EAGAC;IACA;MACAC,oBADA;MAEAC,aAFA;MAIAC,iBAJA;MAKAC,cALA;MAMAC,iBANA;MAOAC;IAPA;EASA,CAbA;;EAcAC;IACAC;MACA;MACAC,2BACAC,IADA,CACAC;QACA;QACA;QACA;QACA;QACA;QACAC;MACA,CARA;IAUA,CAbA;;IAcAC;MACA;MACAJ,wBACAC,IADA,CACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACAC;MACA,CATA;IAUA,CA1BA;;IA2BAE;MACA;IACA;;EA7BA,CAdA;EA6CAC,YACA;MACAC,8BADA;MAEAC;IAFA;EADA;AA7CA","names":["name","components","Notifications","Loader","data","report_abandoned","loader","showNotify","notifyHead","notifyMessage","notifyClass","methods","CreateReportAbandones","api","then","response","setTimeout","DownloadReportAbandones","closeNotification","computed","user","uid"],"sourceRoot":"src/components/Table","sources":["ReportAbandoned.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <h2>Брошенные вагоны</h2>\r\n        <br><br>\r\n        <Loader :loader=\"loader\"></Loader>\r\n        <b-container class=\"bv-example-row\">\r\n            <b-row>\r\n                <b-col>\r\n                    <button class=\"button Action\" @click=\"CreateReportAbandones()\"\r\n                        style=\"width: 100%; position: relative; left: 50%; transform: translate(-50%,0); font-size: 17px; margin-top: 3%\">Создать\r\n                        отчет</button>\r\n\r\n                </b-col>\r\n\r\n                <b-col>\r\n                    <button class=\"button Action\" @click=\"DownloadReportAbandones()\"\r\n                        style=\"width: 100%; position: relative; left: 50%; transform: translate(-50%,0); font-size: 17px; margin-top: 3%\">Загрузить\r\n                        отчеты</button>\r\n\r\n                </b-col>\r\n            </b-row>\r\n\r\n        </b-container>\r\n        <br><br>\r\n        <b-container class=\"bv-example-row\">\r\n            <b-row>\r\n                <b-col>\r\n        <div style=\"width: 100%; overflow-x: auto; height: 70vh; overflow-y: auto;\">\r\n            <table class=\"table\" style=\"table-layout: fixed;\">\r\n                <thead>\r\n                    <tr>\r\n                        <th\r\n                            style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">\r\n                            Файл</th>\r\n                        <th\r\n                            style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">\r\n                            Дата создания</th>\r\n                        <th\r\n                            style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">\r\n                            Создатель</th>\r\n                        <th\r\n                            style=\"width: 150px !important; height: 50px !important; vertical-align: middle !important;\">\r\n                            Тип вагона</th>\r\n\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"reports in report_abandoned\" :key=\"reports.id\">\r\n                        <td style=\"height: 50px !important; vertical-align: middle !important;\">\r\n                            <a download target=\"_blank\" :href=\"reports.file\" v-if=\"reports.file\"><img\r\n                                    src=\"@/assets/excel.png\" alt=\"\" width=\"50px !important\"></a>\r\n                        </td>\r\n                        <td style=\"height: 50px !important; vertical-align: middle !important;\">\r\n                            {{ new Date(reports.created_at).toLocaleString() }}</td>\r\n                        <td style=\"height: 50px !important; vertical-align: middle !important;\">\r\n                            {{ reports.creator.last_name }} {{ reports.creator.first_name }}</td>\r\n                        <td style=\"height: 50px !important; vertical-align: middle !important;\">{{ reports.wagon_type }}\r\n                        </td>\r\n\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <Notifications :show=\"showNotify\" :header=\"notifyHead\" :message=\"notifyMessage\" :block-class=\"notifyClass\"\r\n            id=\"notif\" />\r\n\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n\r\n</style>\r\n\r\n<script>\r\nimport api from '@/api/report'\r\nimport { mapState } from 'vuex'\r\nimport Notifications from '@/components/notifications/Notifications.vue'\r\nimport Loader from '@/components/loader/loader.vue'\r\nexport default {\r\n    name: 'ReportAbandoned',\r\n    components: { Notifications, Loader },\r\n    data() {\r\n        return {\r\n            report_abandoned: '',\r\n            loader: false,\r\n\r\n            showNotify: false,\r\n            notifyHead: '',\r\n            notifyMessage: '',\r\n            notifyClass: '',\r\n        }\r\n    },\r\n    methods: {\r\n        CreateReportAbandones() {\r\n            this.loader = true\r\n            api.CreateReportAbandone()\r\n                .then((response) => {\r\n                    this.loader = false\r\n                    this.notifyHead = 'Успешно'\r\n                    this.notifyMessage = 'Отчет создан'\r\n                    this.notifyClass = 'wrapper-success'\r\n                    this.showNotify = true\r\n                    setTimeout(this.closeNotification, 1500)\r\n                })\r\n\r\n        },\r\n        DownloadReportAbandones() {\r\n            this.loader = true\r\n            api.GetReportAbandone()\r\n                .then((response) => {\r\n                    this.report_abandoned = response.data.data\r\n                    this.loader = false\r\n                    this.notifyHead = 'Успешно'\r\n                    this.notifyMessage = 'Отчеты загружены'\r\n                    this.notifyClass = 'wrapper-success'\r\n                    this.showNotify = true\r\n                    setTimeout(this.closeNotification, 1500)\r\n                })\r\n        },\r\n        closeNotification() {\r\n            this.showNotify = false\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState({\r\n            user: state => state.auth.user,\r\n            uid: state => state.auth.uid,\r\n        })\r\n    },\r\n}\r\n</script>"]},"metadata":{},"sourceType":"module"}