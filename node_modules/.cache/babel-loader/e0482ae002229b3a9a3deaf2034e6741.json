{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { __awaiter, __extends, __generator } from \"tslib\";\nimport { Series } from \"../../core/render/Series\";\nimport { Container } from \"../../core/render/Container\";\nimport { visualSettings } from \"../../core/render/Graphics\";\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\n/**\r\n * A base class for any percent chart series.\r\n */\n\nvar PercentSeries =\n/** @class */\nfunction (_super) {\n  __extends(PercentSeries, _super);\n\n  function PercentSeries() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    Object.defineProperty(_this, \"slicesContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this.children.push(Container.new(_this._root, {\n        position: \"absolute\",\n        isMeasured: false\n      }))\n    });\n    Object.defineProperty(_this, \"labelsContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this.children.push(Container.new(_this._root, {\n        position: \"absolute\",\n        isMeasured: false\n      }))\n    });\n    Object.defineProperty(_this, \"ticksContainer\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this.children.push(Container.new(_this._root, {\n        position: \"absolute\",\n        isMeasured: false\n      }))\n    });\n    Object.defineProperty(_this, \"_lLabels\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(_this, \"_rLabels\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(_this, \"_hLabels\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    /**\r\n     * A [[ListTemplate]] of all slices in series.\r\n     *\r\n     * `slices.template` can also be used to configure slices.\r\n     */\n\n    Object.defineProperty(_this, \"slices\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this._makeSlices()\n    });\n    /**\r\n     * A [[ListTemplate]] of all slice labels in series.\r\n     *\r\n     * `labels.template` can also be used to configure slice labels.\r\n     */\n\n    Object.defineProperty(_this, \"labels\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this._makeLabels()\n    });\n    /**\r\n     * A [[ListTemplate]] of all slice ticks in series.\r\n     *\r\n     * `ticks.template` can also be used to configure slice ticks.\r\n     */\n\n    Object.defineProperty(_this, \"ticks\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this._makeTicks()\n    });\n    return _this;\n  }\n  /**\r\n   * @ignore\r\n   */\n\n\n  Object.defineProperty(PercentSeries.prototype, \"makeSlice\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem) {\n      var _this = this;\n\n      var slice = this.slicesContainer.children.push(this.slices.make());\n      slice.on(\"fill\", function () {\n        _this.updateLegendMarker(dataItem);\n      });\n      slice.on(\"stroke\", function () {\n        _this.updateLegendMarker(dataItem);\n      });\n\n      slice._setDataItem(dataItem);\n\n      dataItem.set(\"slice\", slice);\n      this.slices.push(slice);\n      return slice;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"makeLabel\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem) {\n      var label = this.labelsContainer.children.push(this.labels.make());\n\n      label._setDataItem(dataItem);\n\n      dataItem.set(\"label\", label);\n      this.labels.push(label);\n      return label;\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_shouldMakeBullet\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem) {\n      if (dataItem.get(\"value\") != null) {\n        return true;\n      }\n\n      return false;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"makeTick\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem) {\n      var tick = this.ticksContainer.children.push(this.ticks.make());\n\n      tick._setDataItem(dataItem);\n\n      dataItem.set(\"tick\", tick);\n      this.ticks.push(tick);\n      return tick;\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_afterNew\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this.fields.push(\"category\", \"fill\");\n\n      _super.prototype._afterNew.call(this);\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_onDataClear\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var colors = this.get(\"colors\");\n\n      if (colors) {\n        colors.reset();\n      }\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_prepareChildren\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._prepareChildren.call(this);\n\n      this._lLabels = [];\n      this._rLabels = [];\n      this._hLabels = [];\n\n      if (this._valuesDirty) {\n        var sum_1 = 0;\n        var absSum_1 = 0;\n        var valueHigh_1 = 0;\n        var valueLow_1 = Infinity;\n        var count_1 = 0;\n        $array.each(this._dataItems, function (dataItem) {\n          var valueWorking = dataItem.get(\"valueWorking\", 0);\n          sum_1 += valueWorking;\n          absSum_1 += Math.abs(valueWorking);\n        });\n        $array.each(this._dataItems, function (dataItem) {\n          var value = dataItem.get(\"valueWorking\", 0);\n\n          if (value >= absSum_1) {\n            sum_1 = dataItem.get(\"value\", 0);\n          }\n\n          if (value > valueHigh_1) {\n            valueHigh_1 = value;\n          }\n\n          if (value < valueLow_1) {\n            valueLow_1 = value;\n          }\n\n          count_1++;\n          var percentTotal = value / absSum_1;\n\n          if (absSum_1 == 0) {\n            percentTotal = 0;\n          }\n\n          dataItem.setRaw(\"valuePercentTotal\", percentTotal * 100);\n        });\n        this.setPrivateRaw(\"valueLow\", valueLow_1);\n        this.setPrivateRaw(\"valueHigh\", valueHigh_1);\n        this.setPrivateRaw(\"valueSum\", sum_1);\n        this.setPrivateRaw(\"valueAverage\", sum_1 / count_1);\n        this.setPrivateRaw(\"valueAbsoluteSum\", absSum_1);\n      }\n    }\n  });\n  /**\r\n   * Shows hidden series.\r\n   *\r\n   * @param   duration  Animation duration in milliseconds\r\n   * @return            Animation promise\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"show\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (duration) {\n      return __awaiter(this, void 0, void 0, function () {\n        var promises;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              promises = [];\n              promises.push(_super.prototype.show.call(this, duration));\n              promises.push(this._sequencedShowHide(true, duration));\n              return [4\n              /*yield*/\n              , Promise.all(promises)];\n\n            case 1:\n              _a.sent();\n\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    }\n  });\n  /**\r\n   * Hide whole series.\r\n   *\r\n   * @param   duration  Animation duration in milliseconds\r\n   * @return            Animation promise\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"hide\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (duration) {\n      return __awaiter(this, void 0, void 0, function () {\n        var promises;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              promises = [];\n              promises.push(_super.prototype.hide.call(this, duration));\n              promises.push(this._sequencedShowHide(false, duration));\n              return [4\n              /*yield*/\n              , Promise.all(promises)];\n\n            case 1:\n              _a.sent();\n\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"_updateChildren\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n\n      _super.prototype._updateChildren.call(this);\n\n      if (this._valuesDirty) {\n        $array.each(this._dataItems, function (dataItem) {\n          dataItem.get(\"label\").text.markDirtyText();\n        });\n      }\n\n      if (this.isDirty(\"legendLabelText\") || this.isDirty(\"legendValueText\")) {\n        $array.each(this._dataItems, function (dataItem) {\n          _this.updateLegendValue(dataItem);\n        });\n      }\n\n      this._arrange();\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_arrange\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n\n      this._arrangeDown(this._lLabels);\n\n      this._arrangeUp(this._lLabels);\n\n      this._arrangeDown(this._rLabels);\n\n      this._arrangeUp(this._rLabels);\n\n      this._arrangeLeft(this._hLabels);\n\n      this._arrangeRight(this._hLabels);\n\n      $array.each(this.dataItems, function (dataItem) {\n        _this._updateTick(dataItem);\n      });\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_afterChanged\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._afterChanged.call(this);\n\n      this._arrange();\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"processDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem) {\n      _super.prototype.processDataItem.call(this, dataItem);\n\n      if (dataItem.get(\"fill\") == null) {\n        var colors = this.get(\"colors\");\n\n        if (colors) {\n          dataItem.setRaw(\"fill\", colors.next());\n        }\n      }\n    }\n  });\n  /**\r\n   * Shows series's data item.\r\n   *\r\n   * @param   dataItem  Data item\r\n   * @param   duration  Animation duration in milliseconds\r\n   * @return            Promise\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"showDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem, duration) {\n      return __awaiter(this, void 0, void 0, function () {\n        var promises, easing, value, animation, tick, label, slice;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              promises = [_super.prototype.showDataItem.call(this, dataItem, duration)];\n\n              if (!$type.isNumber(duration)) {\n                duration = this.get(\"stateAnimationDuration\", 0);\n              }\n\n              easing = this.get(\"stateAnimationEasing\");\n              value = dataItem.get(\"value\");\n              animation = dataItem.animate({\n                key: \"valueWorking\",\n                to: value,\n                duration: duration,\n                easing: easing\n              });\n\n              if (animation) {\n                promises.push(animation.waitForStop());\n              }\n\n              tick = dataItem.get(\"tick\");\n\n              if (tick) {\n                promises.push(tick.show(duration));\n              }\n\n              label = dataItem.get(\"label\");\n\n              if (label) {\n                promises.push(label.show(duration));\n              }\n\n              slice = dataItem.get(\"slice\");\n\n              if (slice) {\n                promises.push(slice.show(duration));\n              }\n\n              if (slice.get(\"active\")) {\n                slice.states.applyAnimate(\"active\");\n              }\n\n              return [4\n              /*yield*/\n              , Promise.all(promises)];\n\n            case 1:\n              _a.sent();\n\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    }\n  });\n  /**\r\n   * Hides series's data item.\r\n   *\r\n   * @param   dataItem  Data item\r\n   * @param   duration  Animation duration in milliseconds\r\n   * @return            Promise\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"hideDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem, duration) {\n      return __awaiter(this, void 0, void 0, function () {\n        var promises, hiddenState, easing, animation, tick, label, slice;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              promises = [_super.prototype.hideDataItem.call(this, dataItem, duration)];\n              hiddenState = this.states.create(\"hidden\", {});\n\n              if (!$type.isNumber(duration)) {\n                duration = hiddenState.get(\"stateAnimationDuration\", this.get(\"stateAnimationDuration\", 0));\n              }\n\n              easing = hiddenState.get(\"stateAnimationEasing\", this.get(\"stateAnimationEasing\"));\n              animation = dataItem.animate({\n                key: \"valueWorking\",\n                to: 0,\n                duration: duration,\n                easing: easing\n              });\n\n              if (animation) {\n                promises.push(animation.waitForStop());\n              }\n\n              tick = dataItem.get(\"tick\");\n\n              if (tick) {\n                promises.push(tick.hide(duration));\n              }\n\n              label = dataItem.get(\"label\");\n\n              if (label) {\n                promises.push(label.hide(duration));\n              }\n\n              slice = dataItem.get(\"slice\");\n              slice.hideTooltip();\n\n              if (slice) {\n                promises.push(slice.hide(duration));\n              }\n\n              return [4\n              /*yield*/\n              , Promise.all(promises)];\n\n            case 1:\n              _a.sent();\n\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"disposeDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem) {\n      _super.prototype.disposeDataItem.call(this, dataItem);\n\n      var label = dataItem.get(\"label\");\n\n      if (label) {\n        this.labels.removeValue(label);\n        label.dispose();\n      }\n\n      var tick = dataItem.get(\"tick\");\n\n      if (tick) {\n        this.ticks.removeValue(tick);\n        tick.dispose();\n      }\n\n      var slice = dataItem.get(\"slice\");\n\n      if (slice) {\n        this.slices.removeValue(slice);\n        slice.dispose();\n      }\n    }\n  });\n  /**\r\n   * Triggers hover on a series data item.\r\n   *\r\n   * @since 5.0.7\r\n   * @param  dataItem  Target data item\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"hoverDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem) {\n      var slice = dataItem.get(\"slice\");\n\n      if (slice && !slice.isHidden()) {\n        slice.hover();\n      }\n    }\n  });\n  /**\r\n   * Triggers un-hover on a series data item.\r\n   *\r\n   * @since 5.0.7\r\n   * @param  dataItem  Target data item\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"unhoverDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem) {\n      var slice = dataItem.get(\"slice\");\n\n      if (slice) {\n        slice.unhover();\n      }\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(PercentSeries.prototype, \"updateLegendMarker\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem) {\n      var slice = dataItem.get(\"slice\");\n\n      if (slice) {\n        var legendDataItem = dataItem.get(\"legendDataItem\");\n\n        if (legendDataItem) {\n          var markerRectangle_1 = legendDataItem.get(\"markerRectangle\");\n          $array.each(visualSettings, function (setting) {\n            if (slice.get(setting) != null) {\n              markerRectangle_1.set(setting, slice.get(setting));\n            }\n          });\n        }\n      }\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_arrangeDown\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (labels) {\n      if (labels) {\n        var next_1 = this._getNextDown();\n\n        labels.sort(function (a, b) {\n          if (a.y > b.y) {\n            return 1;\n          } else if (a.y < b.y) {\n            return -1;\n          } else {\n            return 0;\n          }\n        });\n        $array.each(labels, function (l) {\n          var bounds = l.label.adjustedLocalBounds();\n          var labelTop = bounds.top;\n\n          if (l.y + labelTop < next_1) {\n            l.y = next_1 - labelTop;\n          }\n\n          l.label.set(\"y\", l.y);\n          next_1 = l.y + bounds.bottom;\n        });\n      }\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_getNextUp\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return this.labelsContainer.maxHeight();\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_getNextDown\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return 0;\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_arrangeUp\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (labels) {\n      if (labels) {\n        var next_2 = this._getNextUp();\n\n        labels.sort(function (a, b) {\n          if (a.y < b.y) {\n            return 1;\n          } else if (a.y > b.y) {\n            return -1;\n          } else {\n            return 0;\n          }\n        });\n        $array.each(labels, function (l) {\n          var bounds = l.label.adjustedLocalBounds();\n          var labelBottom = bounds.bottom;\n\n          if (l.y + labelBottom > next_2) {\n            l.y = next_2 - labelBottom;\n          }\n\n          l.label.set(\"y\", l.y);\n          next_2 = l.y + bounds.top;\n        });\n      }\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_arrangeRight\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (labels) {\n      if (labels) {\n        var next_3 = 0;\n        labels.sort(function (a, b) {\n          if (a.y > b.y) {\n            return 1;\n          } else if (a.y < b.y) {\n            return -1;\n          } else {\n            return 0;\n          }\n        });\n        $array.each(labels, function (l) {\n          var bounds = l.label.adjustedLocalBounds();\n          var labelLeft = bounds.left;\n\n          if (l.y + labelLeft < next_3) {\n            l.y = next_3 - labelLeft;\n          }\n\n          l.label.set(\"x\", l.y);\n          next_3 = l.y + bounds.right;\n        });\n      }\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_arrangeLeft\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (labels) {\n      if (labels) {\n        var next_4 = this.labelsContainer.maxWidth();\n        labels.sort(function (a, b) {\n          if (a.y < b.y) {\n            return 1;\n          } else if (a.y > b.y) {\n            return -1;\n          } else {\n            return 0;\n          }\n        });\n        $array.each(labels, function (l) {\n          var bounds = l.label.adjustedLocalBounds();\n          var labelRight = bounds.right;\n\n          if (l.y + labelRight > next_4) {\n            l.y = next_4 - labelRight;\n          }\n\n          l.label.set(\"x\", l.y);\n          next_4 = l.y + bounds.left;\n        });\n      }\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_updateSize\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._updateSize.call(this);\n\n      this.markDirty();\n    }\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_updateTick\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (_dataItem) {}\n  });\n  Object.defineProperty(PercentSeries.prototype, \"_dispose\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._dispose.call(this);\n\n      var chart = this.chart;\n\n      if (chart) {\n        chart.series.removeValue(this);\n      }\n    }\n  });\n  Object.defineProperty(PercentSeries, \"className\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"PercentSeries\"\n  });\n  Object.defineProperty(PercentSeries, \"classNames\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: Series.classNames.concat([PercentSeries.className])\n  });\n  return PercentSeries;\n}(Series);\n\nexport { PercentSeries };","map":{"version":3,"mappings":";;AAUA,SAASA,MAAT,QAAyE,0BAAzE;AACA,SAASC,SAAT,QAA0B,6BAA1B;AACA,SAASC,cAAT,QAA+B,4BAA/B;AAEA,OAAO,KAAKC,MAAZ,MAAwB,uBAAxB;AACA,OAAO,KAAKC,KAAZ,MAAuB,sBAAvB;AAqGA;;;;AAGA;AAAA;AAAA;EAA4CC;;EAA5C;IAAA;;IAYCC;sBAAA;wBAAA;oBAAA;aAAkCC,KAAI,CAACC,QAAL,CAAcC,IAAd,CAAmBR,SAAS,CAACS,GAAV,CAAcH,KAAI,CAACI,KAAnB,EAA0B;QAAEC,QAAQ,EAAE,UAAZ;QAAwBC,UAAU,EAAE;MAApC,CAA1B,CAAnB;IAAlC;IACAP;sBAAA;wBAAA;oBAAA;aAAkCC,KAAI,CAACC,QAAL,CAAcC,IAAd,CAAmBR,SAAS,CAACS,GAAV,CAAcH,KAAI,CAACI,KAAnB,EAA0B;QAAEC,QAAQ,EAAE,UAAZ;QAAwBC,UAAU,EAAE;MAApC,CAA1B,CAAnB;IAAlC;IACAP;sBAAA;wBAAA;oBAAA;aAAiCC,KAAI,CAACC,QAAL,CAAcC,IAAd,CAAmBR,SAAS,CAACS,GAAV,CAAcH,KAAI,CAACI,KAAnB,EAA0B;QAAEC,QAAQ,EAAE,UAAZ;QAAwBC,UAAU,EAAE;MAApC,CAA1B,CAAnB;IAAjC;IAEAP;sBAAA;wBAAA;oBAAA;aAAyD;IAAzD;IACAA;sBAAA;wBAAA;oBAAA;aAAyD;IAAzD;IACAA;sBAAA;wBAAA;oBAAA;aAAyD;IAAzD;IAEA;;;;;;IAKAA;sBAAA;wBAAA;oBAAA;aAA2DC,KAAI,CAACO,WAAL;IAA3D;IA2BA;;;;;;IAKAR;sBAAA;wBAAA;oBAAA;aAA2DC,KAAI,CAACQ,WAAL;IAA3D;IAeA;;;;;;IAKAT;sBAAA;wBAAA;oBAAA;aAAyDC,KAAI,CAACS,UAAL;IAAzD;;EA6cA;EA3fA;;;;;;;;;WAGA,UAAiBC,QAAjB,EAA8D;MAA9D;;MACC,IAAMC,KAAK,GAAG,KAAKC,eAAL,CAAqBX,QAArB,CAA8BC,IAA9B,CAAmC,KAAKW,MAAL,CAAYC,IAAZ,EAAnC,CAAd;MAEAH,KAAK,CAACI,EAAN,CAAS,MAAT,EAAiB;QAChBf,KAAI,CAACgB,kBAAL,CAAwBN,QAAxB;MACA,CAFD;MAIAC,KAAK,CAACI,EAAN,CAAS,QAAT,EAAmB;QAClBf,KAAI,CAACgB,kBAAL,CAAwBN,QAAxB;MACA,CAFD;;MAIAC,KAAK,CAACM,YAAN,CAAmBP,QAAnB;;MACAA,QAAQ,CAACQ,GAAT,CAAa,OAAb,EAAsBP,KAAtB;MACA,KAAKE,MAAL,CAAYX,IAAZ,CAAiBS,KAAjB;MAEA,OAAOA,KAAP;IACA;;EAWD;;;;;;;;WAGA,UAAiBD,QAAjB,EAA8D;MAC7D,IAAMS,KAAK,GAAG,KAAKC,eAAL,CAAqBnB,QAArB,CAA8BC,IAA9B,CAAmC,KAAKmB,MAAL,CAAYP,IAAZ,EAAnC,CAAd;;MACAK,KAAK,CAACF,YAAN,CAAmBP,QAAnB;;MACAA,QAAQ,CAACQ,GAAT,CAAa,OAAb,EAAsBC,KAAtB;MACA,KAAKE,MAAL,CAAYnB,IAAZ,CAAiBiB,KAAjB;MACA,OAAOA,KAAP;IACA;;;;;;WAYD,UAA4BT,QAA5B,EAAyE;MACxE,IAAIA,QAAQ,CAACY,GAAT,CAAa,OAAb,KAAyB,IAA7B,EAAmC;QAClC,OAAO,IAAP;MACA;;MACD,OAAO,KAAP;IACA;;EAED;;;;;;;;WAGA,UAAgBZ,QAAhB,EAA6D;MAC5D,IAAMa,IAAI,GAAG,KAAKC,cAAL,CAAoBvB,QAApB,CAA6BC,IAA7B,CAAkC,KAAKuB,KAAL,CAAWX,IAAX,EAAlC,CAAb;;MACAS,IAAI,CAACN,YAAL,CAAkBP,QAAlB;;MACAA,QAAQ,CAACQ,GAAT,CAAa,MAAb,EAAqBK,IAArB;MACA,KAAKE,KAAL,CAAWvB,IAAX,CAAgBqB,IAAhB;MACA,OAAOA,IAAP;IACA;;;;;;WAED;MACC,KAAKG,MAAL,CAAYxB,IAAZ,CAAiB,UAAjB,EAA6B,MAA7B;;MACAyB,iBAAMC,SAAN,CAAeC,IAAf,CAAe,IAAf;IACA;;;;;;WAED;MACC,IAAMC,MAAM,GAAG,KAAKR,GAAL,CAAS,QAAT,CAAf;;MACA,IAAIQ,MAAJ,EAAY;QACXA,MAAM,CAACC,KAAP;MACA;IACD;;;;;;WAED;MACCJ,iBAAMK,gBAAN,CAAsBH,IAAtB,CAAsB,IAAtB;;MAEA,KAAKI,QAAL,GAAgB,EAAhB;MACA,KAAKC,QAAL,GAAgB,EAAhB;MACA,KAAKC,QAAL,GAAgB,EAAhB;;MAEA,IAAI,KAAKC,YAAT,EAAuB;QACtB,IAAIC,KAAG,GAAG,CAAV;QACA,IAAIC,QAAM,GAAG,CAAb;QACA,IAAIC,WAAS,GAAG,CAAhB;QACA,IAAIC,UAAQ,GAAGC,QAAf;QACA,IAAIC,OAAK,GAAG,CAAZ;QACA9C,MAAM,CAAC+C,IAAP,CAAY,KAAKC,UAAjB,EAA6B,UAAClC,QAAD,EAAS;UACrC,IAAImC,YAAY,GAAGnC,QAAQ,CAACY,GAAT,CAAa,cAAb,EAA6B,CAA7B,CAAnB;UACAe,KAAG,IAAIQ,YAAP;UACAP,QAAM,IAAIQ,IAAI,CAACC,GAAL,CAASF,YAAT,CAAV;QACA,CAJD;QAMAjD,MAAM,CAAC+C,IAAP,CAAY,KAAKC,UAAjB,EAA6B,UAAClC,QAAD,EAAS;UACrC,IAAIsC,KAAK,GAAGtC,QAAQ,CAACY,GAAT,CAAa,cAAb,EAA6B,CAA7B,CAAZ;;UACA,IAAI0B,KAAK,IAAIV,QAAb,EAAqB;YACpBD,KAAG,GAAG3B,QAAQ,CAACY,GAAT,CAAa,OAAb,EAAsB,CAAtB,CAAN;UACA;;UAED,IAAI0B,KAAK,GAAGT,WAAZ,EAAuB;YACtBA,WAAS,GAAGS,KAAZ;UACA;;UAED,IAAIA,KAAK,GAAGR,UAAZ,EAAsB;YACrBA,UAAQ,GAAGQ,KAAX;UACA;;UAEDN,OAAK;UAEL,IAAIO,YAAY,GAAGD,KAAK,GAAGV,QAA3B;;UAEA,IAAIA,QAAM,IAAI,CAAd,EAAiB;YAChBW,YAAY,GAAG,CAAf;UACA;;UAEDvC,QAAQ,CAACwC,MAAT,CAAgB,mBAAhB,EAAqCD,YAAY,GAAG,GAApD;QACA,CAvBD;QAyBA,KAAKE,aAAL,CAAmB,UAAnB,EAA+BX,UAA/B;QACA,KAAKW,aAAL,CAAmB,WAAnB,EAAgCZ,WAAhC;QACA,KAAKY,aAAL,CAAmB,UAAnB,EAA+Bd,KAA/B;QACA,KAAKc,aAAL,CAAmB,cAAnB,EAAmCd,KAAG,GAAGK,OAAzC;QACA,KAAKS,aAAL,CAAmB,kBAAnB,EAAuCb,QAAvC;MACA;IACD;;EAED;;;;;;;;;;;WAMA,UAAkBc,QAAlB,EAAmC;;;;;;cAC9BC,QAAQ,GAAwB,EAAhC;cACJA,QAAQ,CAACnD,IAAT,CAAcyB,iBAAM2B,IAAN,CAAUzB,IAAV,CAAU,IAAV,EAAWuB,QAAX,CAAd;cAEAC,QAAQ,CAACnD,IAAT,CAAc,KAAKqD,kBAAL,CAAwB,IAAxB,EAA8BH,QAA9B,CAAd;cACA;cAAA;cAAA,EAAMI,OAAO,CAACC,GAAR,CAAYJ,QAAZ,CAAN;;;cAAAK;;;;;;;;IACA;;EAED;;;;;;;;;;;WAMA,UAAkBN,QAAlB,EAAmC;;;;;;cAC9BC,QAAQ,GAAwB,EAAhC;cACJA,QAAQ,CAACnD,IAAT,CAAcyB,iBAAMgC,IAAN,CAAU9B,IAAV,CAAU,IAAV,EAAWuB,QAAX,CAAd;cAEAC,QAAQ,CAACnD,IAAT,CAAc,KAAKqD,kBAAL,CAAwB,KAAxB,EAA+BH,QAA/B,CAAd;cACA;cAAA;cAAA,EAAMI,OAAO,CAACC,GAAR,CAAYJ,QAAZ,CAAN;;;cAAAK;;;;;;;;IACA;;EAED;;;;;;;;WAGA;MAAA;;MACC/B,iBAAMiC,eAAN,CAAqB/B,IAArB,CAAqB,IAArB;;MACA,IAAI,KAAKO,YAAT,EAAuB;QACtBxC,MAAM,CAAC+C,IAAP,CAAY,KAAKC,UAAjB,EAA6B,UAAClC,QAAD,EAAS;UACrCA,QAAQ,CAACY,GAAT,CAAa,OAAb,EAAsBuC,IAAtB,CAA2BC,aAA3B;QACA,CAFD;MAGA;;MAED,IAAI,KAAKC,OAAL,CAAa,iBAAb,KAAmC,KAAKA,OAAL,CAAa,iBAAb,CAAvC,EAAwE;QACvEnE,MAAM,CAAC+C,IAAP,CAAY,KAAKC,UAAjB,EAA6B,UAAClC,QAAD,EAAS;UACrCV,KAAI,CAACgE,iBAAL,CAAuBtD,QAAvB;QACA,CAFD;MAGA;;MAED,KAAKuD,QAAL;IACA;;;;;;WAED;MAAA;;MACC,KAAKC,YAAL,CAAkB,KAAKjC,QAAvB;;MACA,KAAKkC,UAAL,CAAgB,KAAKlC,QAArB;;MAEA,KAAKiC,YAAL,CAAkB,KAAKhC,QAAvB;;MACA,KAAKiC,UAAL,CAAgB,KAAKjC,QAArB;;MAEA,KAAKkC,YAAL,CAAkB,KAAKjC,QAAvB;;MACA,KAAKkC,aAAL,CAAmB,KAAKlC,QAAxB;;MAEAvC,MAAM,CAAC+C,IAAP,CAAY,KAAK2B,SAAjB,EAA4B,UAAC5D,QAAD,EAAS;QACpCV,KAAI,CAACuE,WAAL,CAAiB7D,QAAjB;MACA,CAFD;IAGA;;;;;;WAGD;MACCiB,iBAAM6C,aAAN,CAAmB3C,IAAnB,CAAmB,IAAnB;;MACA,KAAKoC,QAAL;IACA;;;;;;WAED,UAA0BvD,QAA1B,EAAuE;MACtEiB,iBAAM8C,eAAN,CAAqB5C,IAArB,CAAqB,IAArB,EAAsBnB,QAAtB;;MAEA,IAAIA,QAAQ,CAACY,GAAT,CAAa,MAAb,KAAwB,IAA5B,EAAkC;QACjC,IAAIQ,MAAM,GAAG,KAAKR,GAAL,CAAS,QAAT,CAAb;;QACA,IAAIQ,MAAJ,EAAY;UACXpB,QAAQ,CAACwC,MAAT,CAAgB,MAAhB,EAAwBpB,MAAM,CAAC4C,IAAP,EAAxB;QACA;MACD;IACD;;EAED;;;;;;;;;;;;WAOA,UAA0BhE,QAA1B,EAAyE0C,QAAzE,EAA0F;;;;;;cACnFC,QAAQ,GAAG,CAAC1B,iBAAMgD,YAAN,CAAkB9C,IAAlB,CAAkB,IAAlB,EAAmBnB,QAAnB,EAA6B0C,QAA7B,CAAD,CAAX;;cACN,IAAI,CAACvD,KAAK,CAAC+E,QAAN,CAAexB,QAAf,CAAL,EAA+B;gBAC9BA,QAAQ,GAAG,KAAK9B,GAAL,CAAS,wBAAT,EAAmC,CAAnC,CAAX;cACA;;cAEKuD,MAAM,GAAG,KAAKvD,GAAL,CAAS,sBAAT,CAAT;cAEF0B,KAAK,GAAGtC,QAAQ,CAACY,GAAT,CAAa,OAAb,CAAR;cAEEwD,SAAS,GAAGpE,QAAQ,CAACqE,OAAT,CAAiB;gBAAEC,GAAG,EAAE,cAAP;gBAAuBC,EAAE,EAAEjC,KAA3B;gBAAkCI,QAAQ,EAAEA,QAA5C;gBAAsDyB,MAAM,EAAEA;cAA9D,CAAjB,CAAZ;;cACN,IAAIC,SAAJ,EAAe;gBACdzB,QAAQ,CAACnD,IAAT,CAAc4E,SAAS,CAACI,WAAV,EAAd;cACA;;cAEK3D,IAAI,GAAGb,QAAQ,CAACY,GAAT,CAAa,MAAb,CAAP;;cACN,IAAIC,IAAJ,EAAU;gBACT8B,QAAQ,CAACnD,IAAT,CAAcqB,IAAI,CAAC+B,IAAL,CAAUF,QAAV,CAAd;cACA;;cACKjC,KAAK,GAAGT,QAAQ,CAACY,GAAT,CAAa,OAAb,CAAR;;cACN,IAAIH,KAAJ,EAAW;gBACVkC,QAAQ,CAACnD,IAAT,CAAciB,KAAK,CAACmC,IAAN,CAAWF,QAAX,CAAd;cACA;;cAEKzC,KAAK,GAAGD,QAAQ,CAACY,GAAT,CAAa,OAAb,CAAR;;cACN,IAAIX,KAAJ,EAAW;gBACV0C,QAAQ,CAACnD,IAAT,CAAcS,KAAK,CAAC2C,IAAN,CAAWF,QAAX,CAAd;cACA;;cAED,IAAGzC,KAAK,CAACW,GAAN,CAAU,QAAV,CAAH,EAAuB;gBACtBX,KAAK,CAACwE,MAAN,CAAaC,YAAb,CAA0B,QAA1B;cACA;;cAED;cAAA;cAAA,EAAM5B,OAAO,CAACC,GAAR,CAAYJ,QAAZ,CAAN;;;cAAAK;;;;;;;;IACA;;EAED;;;;;;;;;;;;WAOA,UAA0BhD,QAA1B,EAAyE0C,QAAzE,EAA0F;;;;;;cACnFC,QAAQ,GAAG,CAAC1B,iBAAM0D,YAAN,CAAkBxD,IAAlB,CAAkB,IAAlB,EAAmBnB,QAAnB,EAA6B0C,QAA7B,CAAD,CAAX;cACAkC,WAAW,GAAG,KAAKH,MAAL,CAAYI,MAAZ,CAAmB,QAAnB,EAA6B,EAA7B,CAAd;;cAEN,IAAI,CAAC1F,KAAK,CAAC+E,QAAN,CAAexB,QAAf,CAAL,EAA+B;gBAC9BA,QAAQ,GAAGkC,WAAW,CAAChE,GAAZ,CAAgB,wBAAhB,EAA0C,KAAKA,GAAL,CAAS,wBAAT,EAAmC,CAAnC,CAA1C,CAAX;cACA;;cAEKuD,MAAM,GAAGS,WAAW,CAAChE,GAAZ,CAAgB,sBAAhB,EAAwC,KAAKA,GAAL,CAAS,sBAAT,CAAxC,CAAT;cAEAwD,SAAS,GAAGpE,QAAQ,CAACqE,OAAT,CAAiB;gBAAEC,GAAG,EAAE,cAAP;gBAAuBC,EAAE,EAAE,CAA3B;gBAA8B7B,QAAQ,EAAEA,QAAxC;gBAAkDyB,MAAM,EAAEA;cAA1D,CAAjB,CAAZ;;cACN,IAAIC,SAAJ,EAAe;gBACdzB,QAAQ,CAACnD,IAAT,CAAc4E,SAAS,CAACI,WAAV,EAAd;cACA;;cAEK3D,IAAI,GAAGb,QAAQ,CAACY,GAAT,CAAa,MAAb,CAAP;;cACN,IAAIC,IAAJ,EAAU;gBACT8B,QAAQ,CAACnD,IAAT,CAAcqB,IAAI,CAACoC,IAAL,CAAUP,QAAV,CAAd;cACA;;cACKjC,KAAK,GAAGT,QAAQ,CAACY,GAAT,CAAa,OAAb,CAAR;;cACN,IAAIH,KAAJ,EAAW;gBACVkC,QAAQ,CAACnD,IAAT,CAAciB,KAAK,CAACwC,IAAN,CAAWP,QAAX,CAAd;cACA;;cAEKzC,KAAK,GAAGD,QAAQ,CAACY,GAAT,CAAa,OAAb,CAAR;cACNX,KAAK,CAAC6E,WAAN;;cAEA,IAAI7E,KAAJ,EAAW;gBACV0C,QAAQ,CAACnD,IAAT,CAAcS,KAAK,CAACgD,IAAN,CAAWP,QAAX,CAAd;cACA;;cAED;cAAA;cAAA,EAAMI,OAAO,CAACC,GAAR,CAAYJ,QAAZ,CAAN;;;cAAAK;;;;;;;;IACA;;EAED;;;;;;;;WAGA,UAAuBhD,QAAvB,EAAoE;MACnEiB,iBAAM8D,eAAN,CAAqB5D,IAArB,CAAqB,IAArB,EAAsBnB,QAAtB;;MACA,IAAIS,KAAK,GAAGT,QAAQ,CAACY,GAAT,CAAa,OAAb,CAAZ;;MACA,IAAIH,KAAJ,EAAW;QACV,KAAKE,MAAL,CAAYqE,WAAZ,CAAwBvE,KAAxB;QACAA,KAAK,CAACwE,OAAN;MACA;;MACD,IAAIpE,IAAI,GAAGb,QAAQ,CAACY,GAAT,CAAa,MAAb,CAAX;;MACA,IAAIC,IAAJ,EAAU;QACT,KAAKE,KAAL,CAAWiE,WAAX,CAAuBnE,IAAvB;QACAA,IAAI,CAACoE,OAAL;MACA;;MACD,IAAIhF,KAAK,GAAGD,QAAQ,CAACY,GAAT,CAAa,OAAb,CAAZ;;MACA,IAAIX,KAAJ,EAAW;QACV,KAAKE,MAAL,CAAY6E,WAAZ,CAAwB/E,KAAxB;QACAA,KAAK,CAACgF,OAAN;MACA;IACD;;EAED;;;;;;;;;;;WAMA,UAAqBjF,QAArB,EAAkE;MACjE,IAAMC,KAAK,GAAGD,QAAQ,CAACY,GAAT,CAAa,OAAb,CAAd;;MACA,IAAIX,KAAK,IAAI,CAACA,KAAK,CAACiF,QAAN,EAAd,EAAgC;QAC/BjF,KAAK,CAACkF,KAAN;MACA;IACD;;EAED;;;;;;;;;;;WAMA,UAAuBnF,QAAvB,EAAoE;MACnE,IAAMC,KAAK,GAAGD,QAAQ,CAACY,GAAT,CAAa,OAAb,CAAd;;MACA,IAAIX,KAAJ,EAAW;QACVA,KAAK,CAACmF,OAAN;MACA;IACD;;EAED;;;;;;;;WAGA,UAA0BpF,QAA1B,EAAuE;MACtE,IAAMC,KAAK,GAAGD,QAAQ,CAACY,GAAT,CAAa,OAAb,CAAd;;MAEA,IAAIX,KAAJ,EAAW;QACV,IAAMoF,cAAc,GAAGrF,QAAQ,CAACY,GAAT,CAAa,gBAAb,CAAvB;;QACA,IAAIyE,cAAJ,EAAoB;UACnB,IAAMC,iBAAe,GAAGD,cAAc,CAACzE,GAAf,CAAmB,iBAAnB,CAAxB;UACA1B,MAAM,CAAC+C,IAAP,CAAYhD,cAAZ,EAA4B,UAACsG,OAAD,EAAa;YACxC,IAAItF,KAAK,CAACW,GAAN,CAAU2E,OAAV,KAAsB,IAA1B,EAAgC;cAC/BD,iBAAe,CAAC9E,GAAhB,CAAoB+E,OAApB,EAA6BtF,KAAK,CAACW,GAAN,CAAU2E,OAAV,CAA7B;YACA;UACD,CAJD;QAKA;MACD;IACD;;;;;;WAED,UAAuB5E,MAAvB,EAAkE;MACjE,IAAIA,MAAJ,EAAY;QAEX,IAAI6E,MAAI,GAAG,KAAKC,YAAL,EAAX;;QAEA9E,MAAM,CAAC+E,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ,EAAK;UAChB,IAAID,CAAC,CAACE,CAAF,GAAMD,CAAC,CAACC,CAAZ,EAAe;YACd,OAAO,CAAP;UACA,CAFD,MAGK,IAAIF,CAAC,CAACE,CAAF,GAAMD,CAAC,CAACC,CAAZ,EAAe;YACnB,OAAO,CAAC,CAAR;UACA,CAFI,MAGA;YACJ,OAAO,CAAP;UACA;QACD,CAVD;QAYA3G,MAAM,CAAC+C,IAAP,CAAYtB,MAAZ,EAAoB,UAACmF,CAAD,EAAE;UACrB,IAAMC,MAAM,GAAGD,CAAC,CAACrF,KAAF,CAAQuF,mBAAR,EAAf;UACA,IAAIC,QAAQ,GAAGF,MAAM,CAACG,GAAtB;;UACA,IAAIJ,CAAC,CAACD,CAAF,GAAMI,QAAN,GAAiBT,MAArB,EAA2B;YAC1BM,CAAC,CAACD,CAAF,GAAML,MAAI,GAAGS,QAAb;UACA;;UACDH,CAAC,CAACrF,KAAF,CAAQD,GAAR,CAAY,GAAZ,EAAiBsF,CAAC,CAACD,CAAnB;UAEAL,MAAI,GAAGM,CAAC,CAACD,CAAF,GAAME,MAAM,CAACI,MAApB;QACA,CATD;MAUA;IACD;;;;;;WAED;MACC,OAAO,KAAKzF,eAAL,CAAqB0F,SAArB,EAAP;IACA;;;;;;WAED;MACC,OAAO,CAAP;IACA;;;;;;WAED,UAAqBzF,MAArB,EAAgE;MAC/D,IAAIA,MAAJ,EAAY;QACX,IAAI0F,MAAI,GAAG,KAAKC,UAAL,EAAX;;QAEA3F,MAAM,CAAC+E,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ,EAAK;UAChB,IAAID,CAAC,CAACE,CAAF,GAAMD,CAAC,CAACC,CAAZ,EAAe;YACd,OAAO,CAAP;UACA,CAFD,MAGK,IAAIF,CAAC,CAACE,CAAF,GAAMD,CAAC,CAACC,CAAZ,EAAe;YACnB,OAAO,CAAC,CAAR;UACA,CAFI,MAGA;YACJ,OAAO,CAAP;UACA;QACD,CAVD;QAYA3G,MAAM,CAAC+C,IAAP,CAAYtB,MAAZ,EAAoB,UAACmF,CAAD,EAAE;UACrB,IAAMC,MAAM,GAAGD,CAAC,CAACrF,KAAF,CAAQuF,mBAAR,EAAf;UACA,IAAIO,WAAW,GAAGR,MAAM,CAACI,MAAzB;;UACA,IAAIL,CAAC,CAACD,CAAF,GAAMU,WAAN,GAAoBF,MAAxB,EAA8B;YAC7BP,CAAC,CAACD,CAAF,GAAMQ,MAAI,GAAGE,WAAb;UACA;;UACDT,CAAC,CAACrF,KAAF,CAAQD,GAAR,CAAY,GAAZ,EAAiBsF,CAAC,CAACD,CAAnB;UACAQ,MAAI,GAAGP,CAAC,CAACD,CAAF,GAAME,MAAM,CAACG,GAApB;QACA,CARD;MASA;IACD;;;;;;WAED,UAAwBvF,MAAxB,EAAmE;MAClE,IAAIA,MAAJ,EAAY;QAEX,IAAI6F,MAAI,GAAG,CAAX;QAEA7F,MAAM,CAAC+E,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ,EAAK;UAChB,IAAID,CAAC,CAACE,CAAF,GAAMD,CAAC,CAACC,CAAZ,EAAe;YACd,OAAO,CAAP;UACA,CAFD,MAGK,IAAIF,CAAC,CAACE,CAAF,GAAMD,CAAC,CAACC,CAAZ,EAAe;YACnB,OAAO,CAAC,CAAR;UACA,CAFI,MAGA;YACJ,OAAO,CAAP;UACA;QACD,CAVD;QAYA3G,MAAM,CAAC+C,IAAP,CAAYtB,MAAZ,EAAoB,UAACmF,CAAD,EAAE;UACrB,IAAMC,MAAM,GAAGD,CAAC,CAACrF,KAAF,CAAQuF,mBAAR,EAAf;UACA,IAAIS,SAAS,GAAGV,MAAM,CAACW,IAAvB;;UACA,IAAIZ,CAAC,CAACD,CAAF,GAAMY,SAAN,GAAkBD,MAAtB,EAA4B;YAC3BV,CAAC,CAACD,CAAF,GAAMW,MAAI,GAAGC,SAAb;UACA;;UACDX,CAAC,CAACrF,KAAF,CAAQD,GAAR,CAAY,GAAZ,EAAiBsF,CAAC,CAACD,CAAnB;UAEAW,MAAI,GAAGV,CAAC,CAACD,CAAF,GAAME,MAAM,CAACY,KAApB;QACA,CATD;MAUA;IACD;;;;;;WAED,UAAuBhG,MAAvB,EAAkE;MACjE,IAAIA,MAAJ,EAAY;QACX,IAAIiG,MAAI,GAAG,KAAKlG,eAAL,CAAqBmG,QAArB,EAAX;QAEAlG,MAAM,CAAC+E,IAAP,CAAY,UAACC,CAAD,EAAIC,CAAJ,EAAK;UAChB,IAAID,CAAC,CAACE,CAAF,GAAMD,CAAC,CAACC,CAAZ,EAAe;YACd,OAAO,CAAP;UACA,CAFD,MAGK,IAAIF,CAAC,CAACE,CAAF,GAAMD,CAAC,CAACC,CAAZ,EAAe;YACnB,OAAO,CAAC,CAAR;UACA,CAFI,MAGA;YACJ,OAAO,CAAP;UACA;QACD,CAVD;QAYA3G,MAAM,CAAC+C,IAAP,CAAYtB,MAAZ,EAAoB,UAACmF,CAAD,EAAE;UACrB,IAAMC,MAAM,GAAGD,CAAC,CAACrF,KAAF,CAAQuF,mBAAR,EAAf;UACA,IAAIc,UAAU,GAAGf,MAAM,CAACY,KAAxB;;UACA,IAAIb,CAAC,CAACD,CAAF,GAAMiB,UAAN,GAAmBF,MAAvB,EAA6B;YAC5Bd,CAAC,CAACD,CAAF,GAAMe,MAAI,GAAGE,UAAb;UACA;;UACDhB,CAAC,CAACrF,KAAF,CAAQD,GAAR,CAAY,GAAZ,EAAiBsF,CAAC,CAACD,CAAnB;UACAe,MAAI,GAAGd,CAAC,CAACD,CAAF,GAAME,MAAM,CAACW,IAApB;QACA,CARD;MASA;IACD;;;;;;WAED;MACCzF,iBAAM8F,WAAN,CAAiB5F,IAAjB,CAAiB,IAAjB;;MACA,KAAK6F,SAAL;IACA;;;;;;WAED,UAAsBC,SAAtB,EAAoE,CAEnE;;;;;;WAED;MACChG,iBAAMiG,QAAN,CAAc/F,IAAd,CAAc,IAAd;;MAEA,IAAMgG,KAAK,GAAG,KAAKA,KAAnB;;MACA,IAAIA,KAAJ,EAAW;QACVA,KAAK,CAACC,MAAN,CAAapC,WAAb,CAAyB,IAAzB;MACA;IACD;;EAthBD3F;oBAAA;sBAAA;kBAAA;WAAkC;EAAlC;EACAA;oBAAA;sBAAA;kBAAA;WAA0CN,MAAM,CAACsI,UAAP,CAAkBC,MAAlB,CAAyB,CAACC,aAAa,CAACC,SAAf,CAAzB;EAA1C;EAwhBD;AAAC,CA1hBD,CAA4CzI,MAA5C;;SAAsBwI","names":["Series","Container","visualSettings","$array","$type","__extends","Object","_this","children","push","new","_root","position","isMeasured","_makeSlices","_makeLabels","_makeTicks","dataItem","slice","slicesContainer","slices","make","on","updateLegendMarker","_setDataItem","set","label","labelsContainer","labels","get","tick","ticksContainer","ticks","fields","_super","_afterNew","call","colors","reset","_prepareChildren","_lLabels","_rLabels","_hLabels","_valuesDirty","sum_1","absSum_1","valueHigh_1","valueLow_1","Infinity","count_1","each","_dataItems","valueWorking","Math","abs","value","percentTotal","setRaw","setPrivateRaw","duration","promises","show","_sequencedShowHide","Promise","all","_a","hide","_updateChildren","text","markDirtyText","isDirty","updateLegendValue","_arrange","_arrangeDown","_arrangeUp","_arrangeLeft","_arrangeRight","dataItems","_updateTick","_afterChanged","processDataItem","next","showDataItem","isNumber","easing","animation","animate","key","to","waitForStop","states","applyAnimate","hideDataItem","hiddenState","create","hideTooltip","disposeDataItem","removeValue","dispose","isHidden","hover","unhover","legendDataItem","markerRectangle_1","setting","next_1","_getNextDown","sort","a","b","y","l","bounds","adjustedLocalBounds","labelTop","top","bottom","maxHeight","next_2","_getNextUp","labelBottom","next_3","labelLeft","left","right","next_4","maxWidth","labelRight","_updateSize","markDirty","_dataItem","_dispose","chart","series","classNames","concat","PercentSeries","className"],"sourceRoot":"","sources":["../../../../../src/.internal/charts/percent/PercentSeries.ts"],"sourcesContent":["import type { DataItem } from \"../../core/render/Component\";\nimport type { Graphics } from \"../../core/render/Graphics\";\nimport type { Label } from \"../../core/render/Label\";\nimport type { Tick } from \"../../core/render/Tick\";\nimport type { ListTemplate } from \"../../core/util/List\";\nimport type { ColorSet } from \"../../core/util/ColorSet\";\nimport type { ILegendDataItem } from \"../../core/render/Legend\";\nimport type { Color } from \"../../core/util/Color\";\nimport type { PercentChart } from \"./PercentChart\";\n\nimport { Series, ISeriesSettings, ISeriesDataItem, ISeriesPrivate } from \"../../core/render/Series\";\nimport { Container } from \"../../core/render/Container\";\nimport { visualSettings } from \"../../core/render/Graphics\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\n\nexport interface IPercentSeriesDataItem extends ISeriesDataItem {\n\n\t/**\n\t * Percent of the series value total.\n\t */\n\tvaluePercentTotal: number;\n\n\t/**\n\t * Category.\n\t */\n\tcategory: string;\n\n\t/**\n\t * Slice visual element.\n\t */\n\tslice: Graphics;\n\n\t/**\n\t * Slice label.\n\t */\n\tlabel: Label;\n\n\t/**\n\t * Slice tick.\n\t */\n\ttick: Tick;\n\n\t/**\n\t * A related legend data item.\n\t */\n\tlegendDataItem: DataItem<ILegendDataItem>;\n\n\t/**\n\t * Fill color used for the slice and related elements, e.g. legend marker.\n\t */\n\tfill: Color;\n\n}\n\n//type IPercentSeriesDataItemSettings = { [K in keyof IPercentSeriesDataItem]?: string; };\n\nexport interface IPercentSeriesSettings extends ISeriesSettings {\n\n\t/**\n\t * A [[ColorSet]] to use when asigning colors for slices.\n\t */\n\tcolors?: ColorSet;\n\n\t/**\n\t * A field in data that holds category names.\n\t */\n\tcategoryField?: string;\n\n\t/**\n\t * Should slice labels be aligned in columns/rows?\n\t */\n\talignLabels?: boolean;\n\n\t/**\n\t * A field that holds color for slice fill.\n\t */\n\tfillField?: string;\n\n}\n\nexport interface IPercentSeriesPrivate extends ISeriesPrivate {\n\n\t/**\n\t * Calculate average value in series.\n\t */\n\tvalueAverage?: number;\n\n\t/**\n\t * Count of items in series.\n\t */\n\tvalueCount?: number;\n\n\t/**\n\t * Sum of values in series.\n\t */\n\tvalueSum?: number;\n\n\t/**\n\t * Sum of all absolute values in series.\n\t */\n\tvalueAbsoluteSum?: number;\n\n\t/**\n\t * Lowest value in series.\n\t */\n\tvalueLow?: number;\n\n\t/**\n\t * Highest value in series.\n\t */\n\tvalueHigh?: number;\n\n}\n\n/**\n * A base class for any percent chart series.\n */\nexport abstract class PercentSeries extends Series {\n\tpublic static className: string = \"PercentSeries\";\n\tpublic static classNames: Array<string> = Series.classNames.concat([PercentSeries.className]);\n\n\tdeclare public _settings: IPercentSeriesSettings;\n\tdeclare public _privateSettings: IPercentSeriesPrivate;\n\tdeclare public _dataItemSettings: IPercentSeriesDataItem;\n\n\tdeclare public _sliceType: Graphics;\n\tdeclare public _labelType: Label;\n\tdeclare public _tickType: Tick;\n\n\tpublic readonly slicesContainer = this.children.push(Container.new(this._root, { position: \"absolute\", isMeasured: false }));\n\tpublic readonly labelsContainer = this.children.push(Container.new(this._root, { position: \"absolute\", isMeasured: false }));\n\tpublic readonly ticksContainer = this.children.push(Container.new(this._root, { position: \"absolute\", isMeasured: false }));\n\n\tprotected _lLabels: Array<{ label: Label, y: number }> = [];\n\tprotected _rLabels: Array<{ label: Label, y: number }> = [];\n\tprotected _hLabels: Array<{ label: Label, y: number }> = [];\n\n\t/**\n\t * A [[ListTemplate]] of all slices in series.\n\t *\n\t * `slices.template` can also be used to configure slices.\n\t */\n\tpublic readonly slices: ListTemplate<this[\"_sliceType\"]> = this._makeSlices();\n\n\tprotected abstract _makeSlices(): ListTemplate<this[\"_sliceType\"]>;\n\n\tpublic abstract chart: PercentChart | undefined;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeSlice(dataItem: DataItem<this[\"_dataItemSettings\"]>): this[\"_sliceType\"] {\n\t\tconst slice = this.slicesContainer.children.push(this.slices.make());\n\n\t\tslice.on(\"fill\", () => {\n\t\t\tthis.updateLegendMarker(dataItem);\n\t\t})\n\n\t\tslice.on(\"stroke\", () => {\n\t\t\tthis.updateLegendMarker(dataItem);\n\t\t})\n\n\t\tslice._setDataItem(dataItem);\n\t\tdataItem.set(\"slice\", slice);\n\t\tthis.slices.push(slice);\n\n\t\treturn slice;\n\t}\n\n\t/**\n\t * A [[ListTemplate]] of all slice labels in series.\n\t *\n\t * `labels.template` can also be used to configure slice labels.\n\t */\n\tpublic readonly labels: ListTemplate<this[\"_labelType\"]> = this._makeLabels();\n\n\tprotected abstract _makeLabels(): ListTemplate<this[\"_labelType\"]>;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeLabel(dataItem: DataItem<this[\"_dataItemSettings\"]>): this[\"_labelType\"] {\n\t\tconst label = this.labelsContainer.children.push(this.labels.make());\n\t\tlabel._setDataItem(dataItem);\n\t\tdataItem.set(\"label\", label);\n\t\tthis.labels.push(label);\n\t\treturn label;\n\t}\n\n\t/**\n\t * A [[ListTemplate]] of all slice ticks in series.\n\t *\n\t * `ticks.template` can also be used to configure slice ticks.\n\t */\n\tpublic readonly ticks: ListTemplate<this[\"_tickType\"]> = this._makeTicks();\n\n\tprotected abstract _makeTicks(): ListTemplate<this[\"_tickType\"]>;\n\n\n\tprotected _shouldMakeBullet(dataItem: DataItem<this[\"_dataItemSettings\"]>): boolean {\n\t\tif (dataItem.get(\"value\") != null) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeTick(dataItem: DataItem<this[\"_dataItemSettings\"]>): this[\"_tickType\"] {\n\t\tconst tick = this.ticksContainer.children.push(this.ticks.make());\n\t\ttick._setDataItem(dataItem);\n\t\tdataItem.set(\"tick\", tick);\n\t\tthis.ticks.push(tick);\n\t\treturn tick;\n\t}\n\n\tprotected _afterNew() {\n\t\tthis.fields.push(\"category\", \"fill\");\n\t\tsuper._afterNew();\n\t}\n\n\tprotected _onDataClear() {\n\t\tconst colors = this.get(\"colors\");\n\t\tif (colors) {\n\t\t\tcolors.reset();\n\t\t}\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tthis._lLabels = [];\n\t\tthis._rLabels = [];\n\t\tthis._hLabels = [];\n\n\t\tif (this._valuesDirty) {\n\t\t\tlet sum = 0;\n\t\t\tlet absSum = 0;\n\t\t\tlet valueHigh = 0;\n\t\t\tlet valueLow = Infinity;\n\t\t\tlet count = 0;\n\t\t\t$array.each(this._dataItems, (dataItem) => {\n\t\t\t\tlet valueWorking = dataItem.get(\"valueWorking\", 0);\n\t\t\t\tsum += valueWorking;\n\t\t\t\tabsSum += Math.abs(valueWorking);\n\t\t\t});\n\n\t\t\t$array.each(this._dataItems, (dataItem) => {\n\t\t\t\tlet value = dataItem.get(\"valueWorking\", 0);\n\t\t\t\tif (value >= absSum) {\n\t\t\t\t\tsum = dataItem.get(\"value\", 0);\n\t\t\t\t}\n\n\t\t\t\tif (value > valueHigh) {\n\t\t\t\t\tvalueHigh = value;\n\t\t\t\t}\n\n\t\t\t\tif (value < valueLow) {\n\t\t\t\t\tvalueLow = value;\n\t\t\t\t}\n\n\t\t\t\tcount++;\n\n\t\t\t\tlet percentTotal = value / absSum;\n\n\t\t\t\tif (absSum == 0) {\n\t\t\t\t\tpercentTotal = 0;\n\t\t\t\t}\n\n\t\t\t\tdataItem.setRaw(\"valuePercentTotal\", percentTotal * 100);\n\t\t\t});\n\n\t\t\tthis.setPrivateRaw(\"valueLow\", valueLow);\n\t\t\tthis.setPrivateRaw(\"valueHigh\", valueHigh);\n\t\t\tthis.setPrivateRaw(\"valueSum\", sum);\n\t\t\tthis.setPrivateRaw(\"valueAverage\", sum / count);\n\t\t\tthis.setPrivateRaw(\"valueAbsoluteSum\", absSum);\n\t\t}\n\t}\n\n\t/**\n\t * Shows hidden series.\n\t *\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Animation promise\n\t */\n\tpublic async show(duration?: number): Promise<void> {\n\t\tlet promises: Array<Promise<any>> = [];\n\t\tpromises.push(super.show(duration))\n\n\t\tpromises.push(this._sequencedShowHide(true, duration));\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * Hide whole series.\n\t *\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Animation promise\n\t */\n\tpublic async hide(duration?: number): Promise<void> {\n\t\tlet promises: Array<Promise<any>> = [];\n\t\tpromises.push(super.hide(duration))\n\n\t\tpromises.push(this._sequencedShowHide(false, duration));\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\t\tif (this._valuesDirty) {\n\t\t\t$array.each(this._dataItems, (dataItem) => {\n\t\t\t\tdataItem.get(\"label\").text.markDirtyText();\n\t\t\t});\n\t\t}\n\n\t\tif (this.isDirty(\"legendLabelText\") || this.isDirty(\"legendValueText\")) {\n\t\t\t$array.each(this._dataItems, (dataItem) => {\n\t\t\t\tthis.updateLegendValue(dataItem);\n\t\t\t});\n\t\t}\n\n\t\tthis._arrange();\n\t}\n\n\tprotected _arrange() {\n\t\tthis._arrangeDown(this._lLabels);\n\t\tthis._arrangeUp(this._lLabels);\n\n\t\tthis._arrangeDown(this._rLabels);\n\t\tthis._arrangeUp(this._rLabels);\n\n\t\tthis._arrangeLeft(this._hLabels);\n\t\tthis._arrangeRight(this._hLabels);\n\n\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\tthis._updateTick(dataItem);\n\t\t})\n\t}\n\n\n\tpublic _afterChanged() {\n\t\tsuper._afterChanged();\n\t\tthis._arrange();\n\t}\n\n\tprotected processDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.processDataItem(dataItem);\n\n\t\tif (dataItem.get(\"fill\") == null) {\n\t\t\tlet colors = this.get(\"colors\");\n\t\t\tif (colors) {\n\t\t\t\tdataItem.setRaw(\"fill\", colors.next());\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Shows series's data item.\n\t *\n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async showDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.showDataItem(dataItem, duration)];\n\t\tif (!$type.isNumber(duration)) {\n\t\t\tduration = this.get(\"stateAnimationDuration\", 0);\n\t\t}\n\n\t\tconst easing = this.get(\"stateAnimationEasing\");\n\n\t\tlet value = dataItem.get(\"value\");\n\n\t\tconst animation = dataItem.animate({ key: \"valueWorking\", to: value, duration: duration, easing: easing });\n\t\tif (animation) {\n\t\t\tpromises.push(animation.waitForStop());\n\t\t}\n\n\t\tconst tick = dataItem.get(\"tick\");\n\t\tif (tick) {\n\t\t\tpromises.push(tick.show(duration));\n\t\t}\n\t\tconst label = dataItem.get(\"label\");\n\t\tif (label) {\n\t\t\tpromises.push(label.show(duration));\n\t\t}\n\n\t\tconst slice = dataItem.get(\"slice\");\n\t\tif (slice) {\n\t\t\tpromises.push(slice.show(duration));\n\t\t}\n\n\t\tif(slice.get(\"active\")){\n\t\t\tslice.states.applyAnimate(\"active\");\n\t\t}\n\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * Hides series's data item.\n\t *\n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async hideDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.hideDataItem(dataItem, duration)];\n\t\tconst hiddenState = this.states.create(\"hidden\", {})\n\n\t\tif (!$type.isNumber(duration)) {\n\t\t\tduration = hiddenState.get(\"stateAnimationDuration\", this.get(\"stateAnimationDuration\", 0));\n\t\t}\n\n\t\tconst easing = hiddenState.get(\"stateAnimationEasing\", this.get(\"stateAnimationEasing\"));\n\n\t\tconst animation = dataItem.animate({ key: \"valueWorking\", to: 0, duration: duration, easing: easing });\n\t\tif (animation) {\n\t\t\tpromises.push(animation.waitForStop());\n\t\t}\n\n\t\tconst tick = dataItem.get(\"tick\");\n\t\tif (tick) {\n\t\t\tpromises.push(tick.hide(duration));\n\t\t}\n\t\tconst label = dataItem.get(\"label\");\n\t\tif (label) {\n\t\t\tpromises.push(label.hide(duration));\n\t\t}\n\n\t\tconst slice = dataItem.get(\"slice\");\n\t\tslice.hideTooltip();\n\n\t\tif (slice) {\n\t\t\tpromises.push(slice.hide(duration));\n\t\t}\n\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tlet label = dataItem.get(\"label\");\n\t\tif (label) {\n\t\t\tthis.labels.removeValue(label);\n\t\t\tlabel.dispose();\n\t\t}\n\t\tlet tick = dataItem.get(\"tick\");\n\t\tif (tick) {\n\t\t\tthis.ticks.removeValue(tick);\n\t\t\ttick.dispose();\n\t\t}\n\t\tlet slice = dataItem.get(\"slice\");\n\t\tif (slice) {\n\t\t\tthis.slices.removeValue(slice);\n\t\t\tslice.dispose();\n\t\t}\n\t}\n\n\t/**\n\t * Triggers hover on a series data item.\n\t *\n\t * @since 5.0.7\n\t * @param  dataItem  Target data item\n\t */\n\tpublic hoverDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst slice = dataItem.get(\"slice\");\n\t\tif (slice && !slice.isHidden()) {\n\t\t\tslice.hover();\n\t\t}\n\t}\n\n\t/**\n\t * Triggers un-hover on a series data item.\n\t *\n\t * @since 5.0.7\n\t * @param  dataItem  Target data item\n\t */\n\tpublic unhoverDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst slice = dataItem.get(\"slice\");\n\t\tif (slice) {\n\t\t\tslice.unhover();\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateLegendMarker(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst slice = dataItem.get(\"slice\");\n\n\t\tif (slice) {\n\t\t\tconst legendDataItem = dataItem.get(\"legendDataItem\");\n\t\t\tif (legendDataItem) {\n\t\t\t\tconst markerRectangle = legendDataItem.get(\"markerRectangle\");\n\t\t\t\t$array.each(visualSettings, (setting: any) => {\n\t\t\t\t\tif (slice.get(setting) != null) {\n\t\t\t\t\t\tmarkerRectangle.set(setting, slice.get(setting));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _arrangeDown(labels?: Array<{ label: Label, y: number }>) {\n\t\tif (labels) {\n\n\t\t\tlet next = this._getNextDown();\n\n\t\t\tlabels.sort((a, b) => {\n\t\t\t\tif (a.y > b.y) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\telse if (a.y < b.y) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t$array.each(labels, (l) => {\n\t\t\t\tconst bounds = l.label.adjustedLocalBounds();\n\t\t\t\tlet labelTop = bounds.top;\n\t\t\t\tif (l.y + labelTop < next) {\n\t\t\t\t\tl.y = next - labelTop;\n\t\t\t\t}\n\t\t\t\tl.label.set(\"y\", l.y);\n\n\t\t\t\tnext = l.y + bounds.bottom;\n\t\t\t})\n\t\t}\n\t}\n\n\tprotected _getNextUp() {\n\t\treturn this.labelsContainer.maxHeight();\n\t}\n\n\tprotected _getNextDown() {\n\t\treturn 0;\n\t}\n\n\tprotected _arrangeUp(labels?: Array<{ label: Label, y: number }>) {\n\t\tif (labels) {\n\t\t\tlet next = this._getNextUp();\n\n\t\t\tlabels.sort((a, b) => {\n\t\t\t\tif (a.y < b.y) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\telse if (a.y > b.y) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t$array.each(labels, (l) => {\n\t\t\t\tconst bounds = l.label.adjustedLocalBounds();\n\t\t\t\tlet labelBottom = bounds.bottom;\n\t\t\t\tif (l.y + labelBottom > next) {\n\t\t\t\t\tl.y = next - labelBottom;\n\t\t\t\t}\n\t\t\t\tl.label.set(\"y\", l.y);\n\t\t\t\tnext = l.y + bounds.top;\n\t\t\t})\n\t\t}\n\t}\n\n\tprotected _arrangeRight(labels?: Array<{ label: Label, y: number }>) {\n\t\tif (labels) {\n\n\t\t\tlet next = 0;\n\n\t\t\tlabels.sort((a, b) => {\n\t\t\t\tif (a.y > b.y) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\telse if (a.y < b.y) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t$array.each(labels, (l) => {\n\t\t\t\tconst bounds = l.label.adjustedLocalBounds();\n\t\t\t\tlet labelLeft = bounds.left;\n\t\t\t\tif (l.y + labelLeft < next) {\n\t\t\t\t\tl.y = next - labelLeft;\n\t\t\t\t}\n\t\t\t\tl.label.set(\"x\", l.y);\n\n\t\t\t\tnext = l.y + bounds.right;\n\t\t\t})\n\t\t}\n\t}\n\n\tprotected _arrangeLeft(labels?: Array<{ label: Label, y: number }>) {\n\t\tif (labels) {\n\t\t\tlet next = this.labelsContainer.maxWidth();\n\n\t\t\tlabels.sort((a, b) => {\n\t\t\t\tif (a.y < b.y) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\telse if (a.y > b.y) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t$array.each(labels, (l) => {\n\t\t\t\tconst bounds = l.label.adjustedLocalBounds();\n\t\t\t\tlet labelRight = bounds.right;\n\t\t\t\tif (l.y + labelRight > next) {\n\t\t\t\t\tl.y = next - labelRight;\n\t\t\t\t}\n\t\t\t\tl.label.set(\"x\", l.y);\n\t\t\t\tnext = l.y + bounds.left;\n\t\t\t})\n\t\t}\n\t}\n\n\tpublic _updateSize() {\n\t\tsuper._updateSize();\n\t\tthis.markDirty();\n\t}\n\n\tprotected _updateTick(_dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\n\t}\n\n\tprotected _dispose() {\n\t\tsuper._dispose();\n\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\tchart.series.removeValue(this);\n\t\t}\n\t}\n\n\n}\n"]},"metadata":{},"sourceType":"module"}