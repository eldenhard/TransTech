{"ast":null,"code":"import api from '@/api/directory';\nimport { mapState } from 'vuex';\nimport Loader from '@/components/loader/loader.vue';\nimport filterDirectory from '@/components/filter/FilterDirectory.vue';\nimport groups from '@/helpers/groups';\nexport default {\n  name: 'PartnerTable',\n  components: {\n    Loader,\n    filterDirectory\n  },\n\n  data() {\n    return {\n      groups: groups,\n      nextLink: null,\n      prevLink: null,\n      counterparties: '',\n      loader: false,\n      filter_directory: {\n        search: ''\n      },\n      loader: false,\n      total_objects: '',\n      amount: '',\n      work_name: '',\n      short_name: '',\n      full_name: '',\n      els: '',\n      ogrn: '',\n      inn: '',\n      kpp: '',\n      legal_address: '',\n      manager: '',\n      phone: ''\n    };\n  },\n\n  methods: {\n    goToPage(link) {\n      let url = new URL(link);\n      let pageNumber = url.searchParams.get(\"page\");\n\n      if (pageNumber != null) {\n        this.filter_directory.page = pageNumber;\n      } else {\n        delete this.filter_directory.page;\n      }\n\n      this.getCounterparties();\n    },\n\n    getCounterparties() {\n      this.loader = true;\n      api.getAllcounterparties(this.filter_directory).then(response => {\n        this.counterparties = response.data.data;\n        this.nextLink = response.data.links.next;\n        this.prevLink = response.data.links.previous;\n        this.counterparties = response.data.data;\n        this.total_objects = response.data.total_objects;\n        this.amount = response.data.amount;\n        this.loader = false;\n      }).catch(err => {\n        this.loader = false;\n        console.log(err);\n      });\n    },\n\n    savePartner(id) {\n      this.loader = true;\n      api.putCounterparties(id).then(response => {\n        console.log(response);\n        this.loader = false;\n      });\n    },\n\n    updateFilterDataDirectory(filter_directory) {\n      this.filter_directory = filter_directory;\n    }\n\n  },\n  computed: { ...mapState({\n      user: state => state.auth.user,\n      uid: state => state.auth.uid,\n      allGroups: state => state.auth.groups,\n      staffGlobal: state => state.auth.users\n    })\n  }\n};","map":{"version":3,"mappings":"AA0HA;AACA;AACA;AACA;AACA;AACA;EACAA,oBADA;EAEAC;IAAAC;IAAAC;EAAA,CAFA;;EAGAC;IACA;MACAC,cADA;MAEAC,cAFA;MAGAC,cAHA;MAIAC,kBAJA;MAKAC,aALA;MAMAC;QACAC;MADA,CANA;MASAF,aATA;MAUAG,iBAVA;MAWAC,UAXA;MAYAC,aAZA;MAaAC,cAbA;MAcAC,aAdA;MAeAC,OAfA;MAgBAC,QAhBA;MAiBAC,OAjBA;MAkBAC,OAlBA;MAmBAC,iBAnBA;MAoBAC,WApBA;MAqBAC;IArBA;EAwBA,CA5BA;;EA6BAC;IACAC;MACA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;IACA,CAVA;;IAWAC;MACA;MACAC,gDACAC,IADA,CACAC;QACA;QACA;QACA;QACA;QACA;QACA;QAEA;MACA,CAVA,EAUAC,KAVA,CAUAC;QACA;QACAC;MACA,CAbA;IAeA,CA5BA;;IA6BAC;MACA;MACAN,0BACAC,IADA,CACAC;QACAG;QACA;MACA,CAJA;IAMA,CArCA;;IAsCAE;MACA;IACA;;EAxCA,CA7BA;EAuEAC,YACA;MACAC,8BADA;MAEAC,4BAFA;MAGAC,qCAHA;MAIAC;IAJA;EADA;AAvEA","names":["name","components","Loader","filterDirectory","data","groups","nextLink","prevLink","counterparties","loader","filter_directory","search","total_objects","amount","work_name","short_name","full_name","els","ogrn","inn","kpp","legal_address","manager","phone","methods","goToPage","getCounterparties","api","then","response","catch","err","console","savePartner","updateFilterDataDirectory","computed","user","uid","allGroups","staffGlobal"],"sourceRoot":"src/components/Table","sources":["PartnerTable.vue"],"sourcesContent":["<template>\r\n<div>\r\n    <Loader :loader=\"loader\"></Loader>\r\n    <filterDirectory @updateFilterDataDirectory =\"updateFilterDataDirectory\"></filterDirectory>\r\n    <button class=\"Accept\" @click=\"getCounterparties()\" style=\"width: 100%; position: relative; left: 50%; transform: translate(-50%,0)\">Запросить контрагентов</button>\r\n    <br><br>\r\n    <p class=\"amount\">всего записей: {{total_objects}}</p>\r\n    <p class=\"amount\">всего на странице: {{amount}}</p>  \r\n    <div style=\"width: 100%; overflow-x: auto; height: 80vh; overflow-y: auto; position: relative; left: 50%; transform: translate(-50%,0); margin-bottom: 3%;\"> \r\n    <table class=\"table\" style=\"table-layout: fixed;\">\r\n        <thead>\r\n            <tr>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">Рабочее наименование</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">Кратное наименование</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">Полное наименование</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">ЕЛС</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">ОГРН/ЕГРПОУ/БИН</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">ИНН/РНН</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">КПП/№ Св-ва НДС</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">Юридический адрес</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">Дата создания</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">Руководитель</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">Телефон</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">Группа</th>\r\n                    <th style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\">Действие</th>\r\n\r\n\r\n\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n                <tr v-for=\"part in counterparties\" :key=\"part.id\">\r\n                      <td class=\"td-btr\"><input class=\"input-filter\" type=\"text\" v-model=\"part.work_name\"></td>\r\n                      <td class=\"td-btr\"><input class=\"input-filter\" type=\"text\" v-model=\"part.short_name\"></td>\r\n                      <td class=\"td-btr\"><input class=\"input-filter\" type=\"text\" v-model=\"part.full_name\"></td>\r\n                      <td class=\"td-btr\"><input class=\"input-filter\" type=\"text\" v-model=\"part.els\"></td>\r\n                      <td class=\"td-btr\"><input class=\"input-filter\" type=\"text\" v-model=\"part.ogrn\"></td>\r\n                      <td class=\"td-btr\"><input class=\"input-filter\" type=\"text\" v-model=\"part.inn\"></td>\r\n                      <td class=\"td-btr\"><input class=\"input-filter\" type=\"text\" v-model=\"part.kpp\"></td>\r\n                      <td class=\"td-btr\"><input class=\"input-filter\" type=\"text\" v-model=\"part.legal_address\"></td>\r\n                      <td class=\"td-btr\">{{new Date(part.created_at).toLocaleString()}}</td>\r\n                      <td class=\"td-btr\"><input class=\"input-filter\" type=\"text\" v-model=\"part.manager\"></td>\r\n                      <td class=\"td-btr\"><input class=\"input-filter\" type=\"text\" v-model=\"part.phone\"></td>\r\n                      <td class=\"td-btr\">\r\n                                    <span v-if=\"part.group == 'all'\">Все</span>\r\n                                <span v-if=\"part.group == 'agent'\">Агенты</span>\r\n                                <span v-if=\"part.group == 'renter'\">Арендодатель</span>\r\n                                <span v-if=\"part.group == 'rail_tariff_supplier'\">Поставщики ЖД тарифа</span>\r\n                                <span v-if=\"part.group == 'product_supplier'\">Поставщики товаров</span>\r\n                                <span v-if=\"part.group == 'service_supplier'\">Поставщики услуг и МПЗ</span>\r\n                                <span v-if=\"part.group == 'client'\">Клиенты</span>\r\n                                <span v-if=\"part.group == 'tenant'\">Арендатор</span>\r\n                                <span v-if=\"part.group == 'retail'\">Розничные</span>\r\n                                <span v-if=\"part.group == 'bank'\">Банки</span>\r\n                                <span v-if=\"part.group == 'depot'\">Депо</span>\r\n                                <span v-if=\"part.group == 'our_firm'\">Наши фирмы</span>\r\n                                <span v-if=\"part.group == 'individual'\">Физические лица</span>\r\n                                <span v-if=\"part.group == 'other'\">Прочие</span>\r\n                                <span v-if=\"part.group == 'branch'\">Филиалы</span>\r\n                                <span v-if=\"part.group == 'specific'\">Специфические</span>\r\n                                <span v-if=\"part.group == 'budget'\">Бюджет</span>\r\n                                <span v-if=\"part.group == 'extra_budgetary_fond'\">Внебюджетные фонды</span>\r\n                                <span v-if=\"part.group == 'founder'\">Учредители</span>\r\n                                <span v-if=\"part.group == 'consignee'\">Грузополучатели</span>\r\n                                <span v-if=\"part.group == 'warehouse_or_terminal'\">Склады и терминалы</span>\r\n                                <span v-if=\"part.group == 'new_counterparty_by_edo'\">Новые контрагенты по ЭДО</span>\r\n                                <span v-if=\"part.group == 'edo_operator'\">Операторы ЭДО</span>\r\n                                <span v-if=\"part.group == 'court'\">Суды</span>\r\n                                <span v-if=\"part.group == 'potential_customer'\">Потенциальные клиенты</span>\r\n                                <span v-if=\"part.group == 'new_counterparty'\">Новый контрагент</span>\r\n                                <span v-if=\"part.group == 'employee'\">Сотрудники</span>\r\n                                <span v-if=\"part.group == 'archive'\">Архив</span>\r\n                                <span v-if=\"part.group == 'deleted'\">Удаленные</span>\r\n                         <select :value=\"part.group\">\r\n                            <option>Все</option>\r\n                                 <option v-for=\"g in groups\" >{{}}</option>\r\n                            </select>\r\n                         </td>\r\n                         <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\"><button class=\"Accept\" @click=\"savePartner(part.id)\">Сохранить</button></td> \r\n                    <!-- <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'all'\">Все</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'agent'\">Агенты</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'renter'\">Арендодатель</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'rail_tariff_supplier'\">Поставщики ЖД тарифа</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'product_supplier'\">Поставщики товаров</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'service_supplier'\">Поставщики услуг и МПЗ</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'client'\">Клиенты</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'tenant'\">Арендатор</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'retail'\">Розничные</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'bank'\">Банки</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'depot'\">Депо</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'our_firm'\">Наши фирмы</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'individual'\">Физические лица</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'other'\">Прочие</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'branch'\">Филиалы</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'specific'\">Специфические</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'budget'\">Бюджет</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'extra_budgetary_fond'\">Внебюджетные фонды</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'founder'\">Учредители</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'consignee'\">Грузополучатели</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'warehouse_or_terminal'\">Склады и терминалы</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'new_counterparty_by_edo'\">Новые контрагенты по ЭДО</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'edo_operator'\">Операторы ЭДО</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'court'\">Суды</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'potential_customer'\">Потенциальные клиенты</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'new_counterparty'\">Новый контрагент</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'employee'\">Сотрудники</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'archive'\">Архив</td>\r\n                    <td style=\"width:  200px !important; height: 50px !important; vertical-align: middle !important;\" v-if=\"part.group == 'deleted'\">Удаленные</td>-->\r\n               \\\r\n\r\n                </tr>\r\n        </tbody>\r\n    </table> \r\n</div>\r\n<div style=\"display: flex; justify-content: space-around; margin-top: 2%;\">\r\n            <button class=\"Cancel\" style=\"width: 20%\"  v-if=\"prevLink\" @click=\"goToPage(prevLink)\">назад</button>\r\n            <button class=\"Cancel\" style=\"width: 20%\" v-if=\"nextLink\" @click=\"goToPage(nextLink)\">вперед</button>\r\n    </div>\r\n</div>    \r\n</template>\r\n\r\n<script>\r\nimport api from '@/api/directory'\r\nimport { mapState } from 'vuex';\r\nimport Loader from '@/components/loader/loader.vue'\r\nimport filterDirectory from '@/components/filter/FilterDirectory.vue'\r\nimport groups from '@/helpers/groups'\r\nexport default {\r\n    name: 'PartnerTable',\r\n    components: {Loader,filterDirectory},\r\n    data(){\r\n        return{\r\n            groups: groups,\r\n            nextLink: null,\r\n            prevLink: null,\r\n            counterparties: '',\r\n            loader: false,\r\n            filter_directory:{\r\n                search: ''\r\n            },\r\n            loader: false,\r\n            total_objects: '',\r\n            amount: '',\r\n            work_name: '',\r\n            short_name:'',\r\n            full_name: '',\r\n            els: '',\r\n            ogrn: '',\r\n            inn: '',\r\n            kpp: '',\r\n            legal_address: '',\r\n            manager: '',\r\n            phone: '',\r\n\r\n        }\r\n    },\r\n    methods:{ \r\n        goToPage(link){\r\n        let url = new URL(link)\r\n        let pageNumber  = url.searchParams.get(\"page\")\r\n        if(pageNumber != null){\r\n            this.filter_directory.page = pageNumber \r\n        }else{\r\n            delete(this.filter_directory.page)\r\n        }\r\n        this.getCounterparties()\r\n        },\r\n        getCounterparties(){\r\n            this.loader = true\r\n            api.getAllcounterparties(this.filter_directory)\r\n            .then(response => {\r\n                this.counterparties = response.data.data\r\n                this.nextLink = response.data.links.next\r\n                this.prevLink = response.data.links.previous\r\n                this.counterparties = response.data.data\r\n                this.total_objects = response.data.total_objects\r\n                this.amount = response.data.amount\r\n\r\n                this.loader = false\r\n            }).catch((err) => {\r\n                this.loader = false\r\n                console.log(err)\r\n            })\r\n\r\n        },\r\n        savePartner(id){\r\n            this.loader = true\r\n            api.putCounterparties(id)\r\n            .then(response => {\r\n                console.log(response)\r\n                this.loader = false\r\n            })\r\n\r\n        },\r\n        updateFilterDataDirectory(filter_directory){\r\n            this.filter_directory = filter_directory\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState({\r\n            user: state => state.auth.user,\r\n            uid: state => state.auth.uid,\r\n            allGroups: state => state.auth.groups,\r\n            staffGlobal: state => state.auth.users\r\n        })\r\n    },\r\n}\r\n</script>\r\n\r\n\r\n<style>\r\n.input-filter{\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n    margin: 0 !important;\r\n    border: none;\r\n    text-decoration: none;\r\n    outline: none;\r\n    text-align: center;\r\n    font-size: 13px;\r\n}\r\n</style>\r\n\r\n"]},"metadata":{},"sourceType":"module"}