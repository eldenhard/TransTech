{"ast":null,"code":"import { mapState } from 'vuex';\nimport api from '@/api/report';\nimport Notifications from '@/components/notifications/Notifications.vue';\nimport Loader from '@/components/loader/loader.vue';\nexport default {\n  template: `{{ $route.params.id }}`,\n\n  data() {\n    return {\n      dataArr: [],\n      all_table_data: [],\n      name: '',\n      plan: '',\n      fact: '',\n      deviation: '',\n      comment: '',\n      level: '',\n      updated_at: '',\n      showNotify: false,\n      notifyHead: '',\n      notifyMessage: '',\n      notifyClass: '',\n      loader: false\n    };\n  },\n\n  components: {\n    Notifications,\n    Loader\n  },\n  computed: { ...mapState({\n      user: state => state.auth.user,\n      uid: state => state.auth.uid\n    })\n  },\n\n  mounted() {\n    this.loader = true;\n    api.getBDRreportByID(this.$route.params.id).then(response => {\n      this.all_table_data = response.data.bdr_report_rows;\n      this.loader = false;\n\n      for (const index in this.all_table_data) {\n        this.data[this.all_table_data[index].id] = this.all_table_data[index];\n      }\n\n      console.log(arr);\n    });\n  },\n\n  methods: {\n    saveBDRchange() {\n      alert('Сохранено');\n    },\n\n    closeNotification() {\n      this.showNotify = false;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAkDA;AACA;AACA;AACA;AACA;EACAA,kCADA;;EAEAC;IACA;MACAC,WADA;MAEAC,kBAFA;MAGAC,QAHA;MAIAC,QAJA;MAKAC,QALA;MAMAC,aANA;MAOAC,WAPA;MAQAC,SARA;MASAC,cATA;MAWAC,iBAXA;MAYAC,cAZA;MAaAC,iBAbA;MAcAC,eAdA;MAgBAC;IAhBA;EAoBA,CAvBA;;EAwBAC;IAAAC;IAAAC;EAAA,CAxBA;EAyBAC,YACA;MACAC,8BADA;MAEAC;IAFA;EADA,CAzBA;;EA+BAC;IACA;IACAC,4CACAC,IADA,CACAC;MACA;MAEA;;MAEA;QACA;MACA;;MACAC;IACA,CAVA;EAYA,CA7CA;;EA8CAC;IACAC;MACAC;IACA,CAHA;;IAIAC;MACA;IACA;;EANA;AA9CA","names":["template","data","dataArr","all_table_data","name","plan","fact","deviation","comment","level","updated_at","showNotify","notifyHead","notifyMessage","notifyClass","loader","components","Notifications","Loader","computed","user","uid","mounted","api","then","response","console","methods","saveBDRchange","alert","closeNotification"],"sourceRoot":"src/views","sources":["editBDR.vue"],"sourcesContent":["<template>\r\n   <div>\r\n<h2>БДР отчет</h2>\r\n\r\n<!-- PUT /api/reports/bdr-row/update/365 -->\r\n<br>\r\n<div style=\"width: 95%; overflow-x: auto; height: 80vh; overflow-y: auto; position: relative; left: 50%; transform: translate(-50%,0);\"> \r\n    <table class=\"table\" style=\"table-layout: fixed;\">\r\n<thead>\r\n     <tr>\r\n\r\n          <th style=\" vertical-align: middle !important; table-layout: fixed;\">Название</th>\r\n          <th style=\" vertical-align: middle !important; table-layout: fixed;\">План</th>\r\n          <th style=\" vertical-align: middle !important; table-layout: fixed;\">Ожидаемый факт</th>\r\n          <th style=\" vertical-align: middle !important; table-layout: fixed;\">Отклонение</th>\r\n          <th style=\" vertical-align: middle !important; table-layout: fixed;\">Комментарии по отклонениям</th>\r\n          <th style=\" vertical-align: middle !important; table-layout: fixed;\">Ответственный за статью в целом</th>\r\n          <th style=\" vertical-align: middle !important; table-layout: fixed;\">Лицо, которому Ответственный делегировал заполнение</th>\r\n          <th style=\" vertical-align: middle !important; table-layout: fixed;\">Заполняет ожидаемый факт</th>\r\n          <th style=\" vertical-align: middle !important; table-layout: fixed;\">Дата последнего обновления</th>\r\n          <th style=\" vertical-align: middle !important; table-layout: fixed;\">Действие</th>\r\n     </tr>\r\n</thead>\r\n<tbody >\r\n   <tr v-for=\"bdr in all_table_data\" :key=\"bdr.id\">  \r\n          <td class=\"lc groups\">{{bdr.name}}</td>\r\n          <td class=\"td-btr\"><input class=\"input-filter\" :value=\"bdr.plan\"></td>\r\n          <td class=\"td-btr\"><input class=\"input-filter\" :value=\"bdr.fact\"></td>\r\n          <td class=\"td-btr\"><input class=\"input-filter\" :value=\"bdr.deviation\"></td>\r\n          <td class=\"td-btr\"><input class=\"input-filter\" :value=\"bdr.comment\"></td>\r\n          <td class=\"td-btr\"><input class=\"input-filter\" :value=\"bdr.responsible_users\"></td>\r\n          <td class=\"td-btr\"><input class=\"input-filter\" :value=\"bdr.delegated_users\"></td>\r\n          <td class=\"td-btr\"><input class=\"input-filter\" :value=\"bdr.filling_users\"></td>\r\n          <td class=\"td-btr\">{{new Date(bdr.updated_at).toLocaleString()}}</td>\r\n          <td class=\"td-btr\"><button class=\"Accept\" style=\"height: 100%\" @click=\"saveBDRchange()\">Сохранить</button></td>\r\n\r\n </tr>\r\n\r\n\r\n\r\n</tbody>\r\n  </table>\r\n</div> \r\n<button class=\"Accept\" @click=\"saveBDRreport()\" style=\"width: 95%; margin: 5% 0;  position: relative; left: 50%; transform: translate(-50%,0);\">Сохранить отчет</button>\r\n<Notifications :show=\"showNotify\" :header=\"notifyHead\" :message=\"notifyMessage\" :block-class=\"notifyClass\" id=\"notif\"/>\r\n<Loader :loader=\"loader\"></Loader>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport api from '@/api/report'\r\nimport Notifications from '@/components/notifications/Notifications.vue';\r\nimport Loader from '@/components/loader/loader.vue'\r\nexport default {\r\n     template:`{{ $route.params.id }}`,\r\n    data(){\r\n        return{\r\n            dataArr : [],\r\n           all_table_data: [],\r\n            name: '',\r\n            plan: '',\r\n            fact: '',\r\n            deviation: '',\r\n            comment: '',\r\n            level: '',\r\n            updated_at: '',\r\n\r\n          showNotify: false,\r\n          notifyHead: '',\r\n          notifyMessage: '',\r\n          notifyClass: '',\r\n\r\n          loader: false,\r\n      \r\n            \r\n        }\r\n    },\r\n    components:{Notifications, Loader},\r\n    computed: {\r\n        ...mapState({\r\n            user: state => state.auth.user,\r\n            uid: state => state.auth.uid\r\n        })\r\n    },\r\n    mounted(){\r\n     this.loader = true\r\n          api.getBDRreportByID(this.$route.params.id)\r\n          .then(response => {\r\n               this.all_table_data = response.data.bdr_report_rows\r\n            \r\n               this.loader = false\r\n                \r\n                for(const index in this.all_table_data){\r\n                    this.data[this.all_table_data[index].id] = this.all_table_data[index]\r\n                }\r\n               console.log(arr)\r\n          })\r\n\r\n    },\r\n    methods:{\r\n     saveBDRchange(){\r\n          alert('Сохранено')\r\n     },\r\n     closeNotification(){\r\n            this.showNotify = false\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.lc {\r\n    background: #EBEBEB;\r\n    font-size: normal;\r\n    font-size: 13px;\r\n}\r\n.groups {\r\n    text-align: left;\r\n    font-weight: bold;\r\n    font-size: 13px;\r\n}\r\n.groups-amount{\r\n    background: #DDEBF7;\r\n    font-size: 14px;\r\n}\r\n.input-filter{\r\n    width: 100% !important;\r\n    height: 100% !important;\r\n    margin: 0 !important;\r\n    border: none;\r\n    text-decoration: none;\r\n    outline: none;\r\n    text-align: center;\r\n    font-size: 13px;\r\n}\r\n.td-btr {\r\n    padding: 0 !important;\r\n    vertical-align: middle !important;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}